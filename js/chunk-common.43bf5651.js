(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[1],{"049c":function(e,t,i){"use strict";var s=i("b930"),r=i.n(s);r.a},"04a0":function(e,t,i){"use strict";var s=i("f67f"),r=i.n(s);r.a},"057c":function(e,t,i){},"0a8d":function(e,t,i){"use strict";var s=i("2d67"),r=i.n(s);r.a},1:function(e,t){},2:function(e,t){},"2d67":function(e,t,i){},"2f0a":function(e,t,i){},3:function(e,t){},"3b81":function(e,t,i){"use strict";var s=i("057c"),r=i.n(s);r.a},4:function(e,t){},5:function(e,t){},"57fe":function(e,t,i){"use strict";var s=i("2f0a"),r=i.n(s);r.a},"5e04":function(e,t,i){},6:function(e,t){},"744b":function(e,t,i){"use strict";var s=i("c276"),r=i.n(s);r.a},"82c0":function(e,t,i){},"91bb":function(e,t,i){},9224:function(e){e.exports=JSON.parse('{"a":"2.5.2"}')},ab66:function(e,t,i){"use strict";var s=i("5e04"),r=i.n(s);r.a},ae0d:function(e,t,i){},b2fe:function(e,t,i){"use strict";var s=i("91bb"),r=i.n(s);r.a},b930:function(e,t,i){},c276:function(e,t,i){},d0b1:function(e,t,i){"use strict";i.d(t,"b",(function(){return s})),i.d(t,"c",(function(){return r})),i.d(t,"a",(function(){return n}));i("6b54"),i("06db");var s={clientId:"mqtt-board-".concat(Math.random().toString(16).substr(2,8)),wsOptions:{objectMode:!1,perMessageDeflate:!0},host:"wss://mqtt.flespi.io",keepalive:420,protocolVersion:5,resubscribe:!1,clean:!0,username:"FlespiToken XXXXXXXXXXXXXXXXXXX",password:"",properties:{sessionExpiryInterval:void 0,receiveMaximum:void 0,maximumPacketSize:void 0,topicAliasMaximum:void 0,requestResponseInformation:!1,requestProblemInformation:!1,userProperties:void 0,authenticationMethod:void 0,authenticationData:void 0},will:{topic:void 0,payload:void 0,qos:0,retain:!1,properties:{willDelayInterval:void 0,payloadFormatIndicator:!1,messageExpiryInterval:void 0,contentType:void 0,responseTopic:void 0,correlationData:void 0,userProperties:void 0}}},r={topic:"#",mode:0,treeField:"",highlight:!0,options:{qos:0,nl:!1,rap:!1,rh:0,properties:{subscriptionIdentifier:void 0,userProperties:void 0}},unsubscribeProperties:{userProperties:void 0}},n={topic:"my/topic",payload:'{"hello": "world"}',options:{qos:0,retain:!1,dup:!1,properties:{payloadFormatIndicator:void 0,messageExpiryInterval:void 0,topicAlias:void 0,responseTopic:void 0,correlationData:void 0,userProperties:void 0,contentType:void 0}}}},d619:function(e,t,i){},db71:function(e,t,i){"use strict";var s=i("82c0"),r=i.n(s);r.a},db97:function(e){e.exports=JSON.parse('{"devices":{"selectors":[{"name":"devices","getter":{"name":"getDevices","params":[]},"value":{"label":"all","value":"+"}}],"children":{"state":{"topic":{"topicPattern":"flespi/state/gw/devices/${devices}/${fields}","payloadType":"string"},"selectors":[{"name":"fields","list":[{"label":"ID","value":"id"},{"label":"Name","value":"name"},{"label":"Device type ID","value":"device_type_id"},{"label":"Configuration","value":"configuration"},{"label":"Settings","value":"settings"},{"label":"Messages size","value":"messages_size"},{"label":"Messages TTL","value":"messages_ttl"},{"label":"Messages rotate","value":"messages_rotate"},{"label":"Blocked status","value":"blocked"},{"label":"Connected status","value":"connected"},{"label":"CID","value":"cid"}],"value":{"label":"all","value":"+"}}]},"messages":{"topic":{"topicPattern":"flespi/message/gw/devices/${devices}","payloadType":"JSON"}},"intervals":{"topic":{"topicPattern":"flespi/interval/gw/calcs/${calcs}/devices/${devices}/${events}","payloadType":"JSON"},"selectors":[{"name":"calcs","getter":{"name":"getCalcs","params":["devices"]},"value":{"label":"all","value":"+"}},{"name":"events","list":[{"label":"Created","value":"created"},{"label":"Updated","value":"updated"},{"label":"Deleted","value":"deleted"}],"value":{"label":"all","value":"+"}}]},"logs":{"topic":{"topicPattern":"flespi/log/gw/devices/${devices}/${event type}","payloadType":"JSON"},"selectors":[{"name":"event type","list":[{"label":"Created","value":"created"},{"label":"Updated","value":"updated"},{"label":"Deleted","value":"deleted"},{"label":"Blocked","value":"blocked"},{"label":"Unblocked","value":"unblocked"},{"label":"Connected","value":"connected"},{"label":"Disconnected","value":"disconnected"}],"value":{"label":"all","value":"+"}}]},"telemetry":{"topic":{"topicPattern":"flespi/state/gw/devices/${devices}/telemetry/${parameters}","payloadType":"string"},"selectors":[{"name":"parameters","getter":{"name":"getDevicesTelemetry","params":["devices"]},"value":{"label":"all","value":"+"}}]},"settings":{"topic":{"topicPattern":"flespi/state/gw/devices/${devices}/settings/${name}","payloadType":"JSON"},"selectors":[{"name":"name","getter":{"name":"getDevicesSettings","params":["devices"]},"value":{"label":"all","value":"+"}}]}}},"analytics":{"selectors":[{"name":"calcs","getter":{"name":"getCalcs","params":["devices"]},"value":{"label":"all","value":"+"}},{"name":"devices","getter":{"name":"getDevices","params":["calcs"]},"value":{"label":"all","value":"+"}}],"children":{"state":{"topic":{"topicPattern":"flespi/state/gw/calcs/${calcs}/devices/${devices}/${statuses}","payloadType":"JSON"},"selectors":[{"name":"statuses","list":[{"label":"Synchronization state","value":"synced"},{"label":"Last detected interval","value":"last"},{"label":"Currently active interval","value":"active"}],"value":{"label":"all","value":"+"}}]},"intervals":{"topic":{"topicPattern":"flespi/interval/gw/calcs/${calcs}/devices/${devices}/${events}","payloadType":"JSON"},"selectors":[{"name":"events","list":[{"label":"Created","value":"created"},{"label":"Updated","value":"updated"},{"label":"Deleted","value":"deleted"}],"value":{"label":"all","value":"+"}}]}}}}')},dec3:function(e,t,i){"use strict";var s=i("ae0d"),r=i.n(s);r.a},e567:function(e,t,i){"use strict";var s=function(){var e,t=this,i=t.$createElement,s=t._self._c||i;return s("div",{staticClass:"absolute-full"},[s("q-layout",{attrs:{view:"hhh LpR lff",container:""}},[s("q-header",{attrs:{reveal:""}},[s("q-toolbar",{class:(e={},e["bg-"+t.color]=!0,e["text-white"]=!!t.color,e),staticStyle:{position:"absolute","z-index":"1"}},[t.activeClient&&t.clientsCloseable?s("q-btn",{attrs:{round:"",flat:"",dense:"",icon:"mdi-close"},on:{click:t.clearActiveClient}}):t._e(),s("q-toolbar-title",[t.activeClient||""!==t.whiteLabel?t._e():s("img",{staticStyle:{height:"30px"},attrs:{src:"statics/mqttboard.png",alt:"MQTT Board"}}),t.activeClient?s("span",[t._v("\n             "+t._s(""+(t.activeClient.config.clientName||t.activeClient.config.clientId))+"\n             "),t.activeClient.config.clientName?s("q-tooltip",[t._v(t._s(""+t.activeClient.config.clientId))]):t._e()],1):s("span",[t._v("\n             "+t._s(t.whiteLabel||"MQTT Board")+"\n           ")]),t.activeClient&&t.$q.platform.is.desktop?s("sup",{staticClass:"absolute",class:["bg-"+(t.activeClient.status?"green":"red")],staticStyle:{"border-radius":"5px","font-size":".6rem",padding:"2px","min-width":"15px",top:"5px"}},[t._v(t._s(t.activeClient.status?"online":"offline"))]):t._e(),t.activeClient&&t.$q.platform.is.desktop&&t.activeClient.cid?s("sub",{staticStyle:{"border-radius":"5px","font-size":".7rem",padding:"2px"},attrs:{title:"cid"}},[t._v(t._s(t.activeClient.cid))]):t._e(),t.activeClient||""!==t.whiteLabel?t._e():s("sup",{staticStyle:{position:"relative","font-size":".9rem","padding-left":"4px"}},[t._v(t._s(t.version))])]),t.activeClient?s("q-btn",{attrs:{round:"",flat:"",dark:"",icon:"mdi-settings"},on:{click:function(e){return e.stopPropagation(),t.editClientHandler(t.activeClient.id)}}}):t._e(),t.activeClient?s("q-btn",{attrs:{round:"",flat:"",icon:"mdi-plus"}},[s("q-menu",{attrs:{anchor:"bottom right",self:"top right","content-class":"mqtt-board__popup"}},[s("q-list",[s("q-item-label",{attrs:{header:""}},[t._v("Add pane")]),s("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"},{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""},on:{click:function(e){return t.addPublisher()}}},[s("q-item-section",{attrs:{avatar:""}},[s("q-icon",{attrs:{name:"mdi-publish"}})],1),s("q-item-section",[s("q-item-label",[t._v("Publisher")])],1)],1),s("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"},{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""},on:{click:function(e){return t.addSubscriber()}}},[s("q-item-section",{attrs:{avatar:""}},[s("q-icon",{attrs:{name:"mdi-arrow-down-bold"}})],1),s("q-item-section",[s("q-item-label",[t._v("Subscriber")])],1)],1)],1)],1)],1):t._e(),t.activeClient?s("q-btn",{attrs:{round:"",flat:"",dark:"",icon:"mdi-menu"},on:{click:function(e){e.stopPropagation(),t.drawerRight=!t.drawerRight}}}):t._e(),t.activeClient||t.whiteLabel?t._e():s("q-btn",{staticStyle:{"margin-right":"60px"},attrs:{dense:"",flat:"",color:"white",icon:"mdi-github-circle",label:t.$q.platform.is.mobile?"":"Fork me!"},on:{click:function(e){return t.openURL("https://github.com/flespi-software/MQTT-Board")}}})],1),t.activeClient?t._e():s("q-btn",{staticStyle:{position:"absolute",right:"16px",top:"21px","z-index":"2"},attrs:{fab:"",icon:"mdi-plus",color:t.accentColor},nativeOn:{click:function(e){return t.addClientHandler(e)}}})],1),t.activeClient?s("q-drawer",{attrs:{side:"right",bordered:"",breakpoint:500,"content-class":"bg-grey-3 absolute"},model:{value:t.drawerRight,callback:function(e){t.drawerRight=e},expression:"drawerRight"}},[s("entities-menu",{staticClass:"full-width relative-position",staticStyle:{height:"calc(100% - 98px)",top:"50px"},attrs:{entities:t.menuEnitites,active:[t.firstViewedPanelIndex,t.firstViewedPanelIndex+t.colsCount-1]},on:{pick:t.pickEntity,"subscriber:play":function(e){return t.subscribeMessageHandler(t.activeClient.id,e)},"subscriber:stop":function(e){return t.unsubscribeMessageHandler(t.activeClient.id,e)},publish:t.publishFreeMessage}}),t.needCloseAll?[s("q-btn",{staticClass:"absolute-bottom",staticStyle:{bottom:"7px",left:"4px",width:"calc(50% - 8px)"},attrs:{color:"grey-7",unelevated:"",label:"Close"},on:{click:function(e){t.needCloseAll=!1}}}),s("q-btn",{staticClass:"absolute-bottom",staticStyle:{bottom:"7px",left:"calc(50% + 4px)",width:"calc(50% - 8px)"},attrs:{color:"red",unelevated:"",label:"remove"},on:{click:function(){t.closeAllHandler(),t.needCloseAll=!1}}})]:s("q-btn",{staticClass:"absolute-bottom",staticStyle:{bottom:"7px",left:"4px",width:"calc(100% - 8px)"},attrs:{color:"red",disable:!t.subscribers.length&&!t.publishers.length,unelevated:"",label:"remove all"},on:{click:function(e){t.needCloseAll=!0}}})],2):t._e(),s("q-page-container",[s("q-page",[s("div",[t.republishMessage?s("publisher-modal",{ref:"publisherModal",attrs:{message:t.republishMessage,version:t.activeClient.config.protocolVersion},on:{publish:t.publishFreeMessage,hide:function(e){t.republishMessage=null}}}):t._e(),t.settingsModalModel?s("client-settings-modal",{attrs:{color:t.color,secure:t.secure,settings:null!==t.editedClientId?t.clients[t.editedClientId].config:{},initSettings:t.initSettings},on:{save:t.saveSettingsHandler,close:t.closeSettingsHandler}}):t._e(),t.activeClient?t.renderedEntities.length?s("div",[s("div",{directives:[{name:"touch-swipe",rawName:"v-touch-swipe.horizontal",value:t.swipeHandler,expression:"swipeHandler",modifiers:{horizontal:!0}}],ref:"wrapper",staticClass:"no-wrap row client__wrapper",on:{scroll:t.wrapperScroll}},[s("q-resize-observer",{attrs:{debounce:0},on:{resize:t.onWrapperResize}}),t._l(t.renderedEntities,(function(e,i){return["publisher"===e.type?s("publisher",{key:"publ"+e.id,ref:"entities",refInFor:!0,class:["col-"+12/t.colsCount],attrs:{value:t.publishers[e.index],version:t.activeClient.config.protocolVersion},on:{input:function(i){t.inputPublisher(e.index,i)},remove:function(i){return t.removePublisher(e.index)},publish:function(i){return t.publishMessageHandler(t.activeClient.id,e.index)},hide:function(i){return t.$set(e,"rendered",!1)}}}):"subscriber"===e.type?s("subscriber",{key:"subs"+e.id,ref:"entities",refInFor:!0,class:["col-"+12/t.colsCount],attrs:{value:t.subscribers[e.index],status:t.subscribersStatuses[e.index],subscribed:t.subscribersConnectivityStatuses[e.index],messages:t.subscribersMessages[e.index],client:t.activeClient},on:{input:function(i){t.inputSubscriber(e.index,i)},remove:function(i){return t.removeSubscriber(e.index)},subscribe:function(i){return t.subscribeMessageHandler(t.activeClient.id,e.index)},unsubscribe:function(i){return t.unsubscribeMessageHandler(t.activeClient.id,e.index)},play:function(i){return t.playSubscriberHandler(e.index)},pause:function(i){return t.pauseSubscriberHandler(e.index)},clear:function(i){return t.clearMessagesHandler(e.index)},"action-send":t.sendFromSubscriberHandler,hide:function(i){return t.$set(e,"rendered",!1)}}}):"unresolved"===e.type?s("unresolved",{key:"unresolved"+i,ref:"entities",refInFor:!0,class:["col-"+12/t.colsCount],attrs:{messages:t.notResolvedMessages},on:{clear:t.clearUnresolvedMessages,hide:function(i){return t.$set(e,"rendered",!1)}}}):"logs"===e.type?s("logs",{key:"subs"+i,ref:"entities",refInFor:!0,class:["col-"+12/t.colsCount],attrs:{logs:t.activeClient.logs},on:{clear:t.clearLogs,hide:function(i){return t.$set(e,"rendered",!1)}}}):t._e()]}))],2),s("slider-controller",{attrs:{entities:t.renderedEntities,"buttons-disable":{prev:0===t.firstViewedPanelIndex,next:t.entities.length-t.colsCount===t.firstViewedPanelIndex},active:[t.firstViewedPanelIndex,t.firstViewedPanelIndex+t.colsCount-1]},on:{swipe:function(e){return t.swipeHandler({direction:e})},"swipe-to":t.scrollToEntity}})],1):t.renderedEntities.length?t.statuses[t.activeClient.id]?t._e():s("div",{staticClass:"text-center q-mt-lg text-grey-9 text-weight-bold absolute",staticStyle:{"font-size":"2.5rem",top:"50px",bottom:"0",left:"0",right:"0"}},[s("div",[t._v("Ð¡lient is disconnected")])]):s("div",{staticClass:"text-center q-mt-lg text-grey-9 text-weight-bold absolute",staticStyle:{"font-size":"2.5rem",top:"50px",bottom:"0",left:"0",right:"0"}},[t._v("No active entities")]):s("div",{staticClass:"absolute scroll",staticStyle:{top:"50px",left:"0",right:"0",bottom:"0"}},[Object.keys(t.clients).length?s("div",{staticClass:"mqtt-clients row q-pt-md"},t._l(t.clients,(function(e,i){return s("div",{key:i,staticClass:"client__item q-pt-md q-px-md cursor-pointer col-xl-3 col-md-4 col-sm-6 col-xs-12"},[s("q-card",{class:{"bg-red-2":!t.statuses[i],"bg-green-2":t.statuses[i]},nativeOn:{click:function(e){return t.setActiveClient(i)}}},[s("q-card-section",{staticClass:"q-py-sm"},[s("div",{staticClass:"ellipsis q-mb-xs",staticStyle:{"font-size":"18px","line-height":"18px","min-height":"18px"}},[t._v(t._s(e.config.clientName||e.config.clientId))]),s("div",{staticClass:"ellipsis text-grey-9",staticStyle:{"font-size":"14px","line-height":"14px","min-height":"14px"}},[t._v(t._s(e.config.clientName?e.config.clientId:""))]),s("div",{staticClass:"text-grey-9 q-mt-sm"},[t._v(t._s(e.config.host))])]),s("q-separator"),s("q-card-actions",{attrs:{align:"right"}},[e.client?s("q-btn",{attrs:{round:"",flat:"",size:".7rem",icon:"mdi-stop",loading:!!e.client&&!t.statuses[i]&&e.inited},on:{click:function(e){return e.stopPropagation(),t.disconnectClientHandler(i)}}},[s("div",{attrs:{slot:"loading"},on:{click:function(e){e.stopPropagation()}},slot:"loading"},[s("q-spinner")],1),s("q-tooltip",[t._v("Deactivate client")])],1):s("q-btn",{attrs:{round:"",flat:"",size:".7rem",icon:"mdi-play"},on:{click:function(e){return e.stopPropagation(),t.connectClientHandler(i)}}},[s("q-tooltip",[t._v("Activate client")])],1),s("q-btn",{attrs:{round:"",flat:"",size:".7rem",icon:"mdi-settings"},on:{click:function(e){return e.stopPropagation(),t.editClientHandler(i)}}}),s("q-btn",{attrs:{round:"",flat:"",size:".7rem",icon:"mdi-delete"},on:{click:function(e){return e.stopPropagation(),t.deleteClientHandler(i)}}})],1)],1)],1)})),0):s("div",{staticClass:"text-center q-mt-lg text-grey-9 text-weight-bold",staticStyle:{"font-size":"2.5rem"}},[s("div",[t._v("No clients")]),t.activeClient?t._e():s("q-btn",{nativeOn:{click:function(e){return t.addClientHandler(e)}}},[t._v("Create client")])],1)])],1)])],1)],1)],1)},r=[],n=(i("8e6e"),i("ac4d"),i("8a81"),i("5df3"),i("1c4c"),i("7f7f"),i("4db1")),o=i.n(n),a=(i("8615"),i("6c7b"),i("967e")),l=i.n(a),c=(i("96cf"),i("fa84")),p=i.n(c),u=(i("20d6"),i("6b54"),i("28a5"),i("a481"),i("6762"),i("2fdb"),i("c47a")),d=i.n(u),m=(i("ac6a"),i("cadf"),i("06db"),i("456d"),i("551c"),i("fc74")),f=i.n(m),b=i("59a1"),h=i.n(b),g=i("e7fc"),v=i.n(g),y=function(){function e(t){f()(this,e),this._client=t}return h()(e,[{key:"publish",value:function(){for(var e=this,t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return new Promise((function(t,s){var r;(r=e._client).publish.apply(r,i.concat([function(e,i){e?s(e):t(i)}]))}))}},{key:"subscribe",value:function(){for(var e=this,t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return new Promise((function(t,s){var r;(r=e._client).subscribe.apply(r,i.concat([function(e,i){e?s(e):t(i)}]))}))}},{key:"unsubscribe",value:function(){for(var e=this,t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return new Promise((function(t,s){var r;(r=e._client).unsubscribe.apply(r,i.concat([function(e,i){e?s(e):t(i)}]))}))}},{key:"end",value:function(){for(var e=this,t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return new Promise((function(t,s){var r;(r=e._client).end.apply(r,i.concat([function(e,i){e?s(e):t(i)}]))}))}},{key:"reconnect",value:function(){var e;return(e=this._client).reconnect.apply(e,arguments)}},{key:"addListener",value:function(){var e;return(e=this._client).addListener.apply(e,arguments)}},{key:"emit",value:function(){var e;return(e=this._client).emit.apply(e,arguments)}},{key:"eventNames",value:function(){var e;return(e=this._client).eventNames.apply(e,arguments)}},{key:"getLastMessageId",value:function(){var e;return(e=this._client).getLastMessageId.apply(e,arguments)}},{key:"getMaxListeners",value:function(){var e;return(e=this._client).getMaxListeners.apply(e,arguments)}},{key:"listenerCount",value:function(){var e;return(e=this._client).listenerCount.apply(e,arguments)}},{key:"listeners",value:function(){var e;return(e=this._client).listeners.apply(e,arguments)}},{key:"off",value:function(){var e;return(e=this._client).off.apply(e,arguments)}},{key:"on",value:function(){var e;return(e=this._client).on.apply(e,arguments)}},{key:"once",value:function(){var e;return(e=this._client).once.apply(e,arguments)}},{key:"prependListener",value:function(){var e;return(e=this._client).prependListener.apply(e,arguments)}},{key:"prependOnceListener",value:function(){var e;return(e=this._client).prependOnceListener.apply(e,arguments)}},{key:"rawListeners",value:function(){var e;return(e=this._client).rawListeners.apply(e,arguments)}},{key:"removeAllListeners",value:function(){var e;return(e=this._client).removeAllListeners.apply(e,arguments)}},{key:"removeListener",value:function(){var e;return(e=this._client).removeListener.apply(e,arguments)}},{key:"removeOutgoingMessage",value:function(){var e;return(e=this._client).removeOutgoingMessage.apply(e,arguments)}},{key:"setMaxListeners",value:function(){var e;return(e=this._client).setMaxListeners.apply(e,arguments)}},{key:"handleMessage",set:function(e){this._client.handleMessage=e},get:function(){return this._client.handleMessage}},{key:"connected",get:function(){return this._client.connected}},{key:"reconnecting",get:function(){return this._client.reconnecting}}]),e}(),q={connect:function(e,t){var i=v.a.connect(e,t),s=new y(i);return s},connectAsync:function(e,t){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],s=v.a.connect(e,t),r=new y(s);return new Promise((function(e,t){var n={connect:function(t){o(),e(r)},end:function(){o(),e(r)},error:function(e){o(),s.end(),t(e)}};!1===i&&(n.close=function(){n.error("Couldn't connect to server")});var o=function(){Object.keys(n).forEach((function(e){s.removeListener(e,n[e])}))};Object.keys(n).forEach((function(e){s.on(e,n[e])}))}))},AsyncClient:y},x=i("42454"),_=i.n(x),S=i("0644"),w=i.n(S),C=i("9b02"),k=i.n(C),P=i("b047c"),$=i.n(P),M=i("18d6"),O=i("b06b"),I=i("1732"),T=function(e){return e},U={};function j(e){var t=e.name,i=e.duration,s=void 0===i?300:i,r=e.to,n=e.from,o=e.apply,a=e.done,l=e.cancel,c=e.easing,p=t,u=new Date;p?D(p):p=Object(I["a"])();var d=c||T,m=function e(){var t=(new Date-u)/s;t>1&&(t=1);var i=n+(r-n)*d(t);if(o(i,t),1===t)return delete U[p],void(a&&a(i));f.last={pos:i,progress:t},f.timer=requestAnimationFrame(e)},f=U[p]={cancel:l,timer:requestAnimationFrame(m)};return p}function D(e){if(e){var t=U[e];t&&t.timer&&(cancelAnimationFrame(t.timer),t.cancel&&t.cancel(t.last),delete U[e])}}var E={start:j,stop:D},A=i("9224"),N=i("b697"),H=i.n(N),z=i("0f5c"),L=i.n(z),R={"2.5.1":function(e){k()(e.config,"properties.userProperties",void 0)||L()(e.config,"properties.userProperties",void 0),k()(e.config,"will.properties.userProperties",void 0)||L()(e.config,"properties.userProperties",void 0),e.publishers.forEach((function(e){k()(e,"options.properties.userProperties",void 0)||L()(e,"options.properties.userProperties",void 0)})),e.subscribers.forEach((function(e){k()(e,"options.properties.userProperties",void 0)||L()(e,"options.properties.userProperties",void 0),k()(e,"unsubscribeProperties",void 0)||L()(e,"unsubscribePropertie",void 0)}))}},V={methods:{migrateClient:function(e){var t=Object.keys(R),i=e.appVersion||"2.5.0",s=A["a"];return t.forEach((function(t){if(H.a.compare(t,i,">")&&H.a.compare(t,s,"<="))try{R[t](e)}catch(r){console.log(r)}})),e}}},F=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"mqtt-client__subscriber"},[e.status||null!==e.isPlayed?i("q-card",{staticClass:"subscriber__item q-ma-sm"},[e.filterMode?i("q-input",{staticClass:"q-ma-sm q-my-xs",attrs:{color:"grey-9",outlined:"","hide-bottom-space":"",label:"Filter by topic",autofocus:""},model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}},[i("q-btn",{attrs:{slot:"prepend",color:"grey-9",icon:"mdi-arrow-left",flat:"",round:""},on:{click:function(t){e.filterMode=!1,e.filter=""}},slot:"prepend"}),e.filter?i("q-btn",{attrs:{slot:"append",color:"grey-9",icon:"mdi-close",flat:"",round:""},on:{click:function(t){e.filter=""}},slot:"append"}):e._e()],1):i("q-toolbar",{staticClass:"q-pr-none text-white bg-orange",staticStyle:{"border-top-right-radius":"0","border-top-left-radius":"0"}},[i("q-toolbar-title",{staticStyle:{width:"calc(100% - 150px)"}},[i("span",[e._v("\n          "+e._s(e.config.topic)+"\n          "),i("q-tooltip",[e._v(e._s(e.config.topic))])],1)]),0===e.config.mode?i("q-btn",{attrs:{round:"",flat:"",icon:"mdi-magnify"},on:{click:function(t){e.filterMode=!0}}}):e._e(),i("q-btn",{attrs:{round:"",flat:"",icon:"mdi-stop",title:"Unsubscribe"},on:{click:function(t){return e.unsubscribeMessageHandler()}}}),i("q-btn",{attrs:{round:"",flat:"",icon:e.isPlayed&&"paused"!==e.status?"mdi-pause":"mdi-play",title:e.isPlayed&&"paused"!==e.status?"Pause":"Resume"},on:{click:e.playStopHandler}},["paused"===e.status&&e.value.missedMessages?i("q-chip",{staticClass:"absolute-top-right",staticStyle:{top:"-5px",right:"-5px"},attrs:{color:"red",dense:"","text-color":"white",size:".6rem",square:""}},[e._v("\n          "+e._s(e.value.missedMessages)+"\n        ")]):e._e()],1),i("q-btn",{attrs:{round:"",flat:"",icon:"mdi-dots-vertical"}},[i("q-menu",{attrs:{anchor:"bottom right",self:"top right","content-class":"mqtt-board__popup"}},[i("q-list",[0===e.config.mode?i("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"},{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""},nativeOn:{click:function(t){return e.clearMessagesHandler(t)}}},[i("q-item-section",{attrs:{avatar:""}},[i("q-icon",{attrs:{name:"mdi-playlist-remove"}})],1),i("q-item-section",[i("q-item-label",[e._v("Clear messages")])],1)],1):e._e(),0===e.config.mode?i("q-separator",{attrs:{spaced:""}}):e._e(),i("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"},{name:"ripple",rawName:"v-ripple"}],attrs:{highlight:"",clickable:""},nativeOn:{click:function(t){return e.removeSubscriber()}}},[i("q-item-section",{attrs:{avatar:""}},[i("q-icon",{attrs:{color:"red",name:"mdi-delete-outline"}})],1),i("q-item-section",[i("q-item-label",[e._v("Remove")])],1)],1)],1)],1)],1)],1),i("div",{staticStyle:{position:"relative"},style:{height:"calc(100% - "+(e.filterMode?"62px":"50px")+")"}},[e.messages&&e.messages.length&&0===e.config.mode?i("virtual-list",{directives:[{name:"autoscroll",rawName:"v-autoscroll",value:e.needAutoScroll,expression:"needAutoScroll"}],ref:"scroller",staticClass:"subscriber__list",attrs:{onscroll:e.listScroll,size:110,remain:15,item:e.Message,itemcount:e.renderedMessages.length,itemprops:e.getMessageProps}}):1===e.config.mode&&Object.keys(e.renderedMessages).length&&e.subscribed?i("div",{staticClass:"subscriber__list subscriber__list--tree"},[i("div",{staticClass:"scroll",staticStyle:{height:"60%"}},[i("tree",{attrs:{topic:e.treeSelectedTopic,data:e.renderedMessages},on:{change:e.treeValueChangeHandler}})],1),i("div",{staticClass:"scroll tree__message"},[e._l(e.treeModeValue,(function(t,s,r){return["undefined"!==typeof t.payload?i("message",{key:"tree-message-"+s+"-"+r,attrs:{message:t,highlight:e.config.highlight},on:{"action-send":function(t){e.$emit("action-send",t)}}}):i("div",{key:"tree-message-empty-"+r,staticClass:"text-center",staticStyle:{height:"100%"}},[i("div",{staticClass:"q-pt-sm text-grey-9",staticStyle:{"font-size":"1.5rem"}},[e._v("No messages")]),i("div",{staticClass:"text-grey-8"},[e._v(e._s(t.topic))]),i("q-icon",{attrs:{color:"red",name:"mail",size:"5rem"}})],1)]}))],2)]):e.status&&e.subscribed&&!e.processingFlag?i("div",{staticClass:"subscriber__list--empty"},[e._v("No messages")]):e._e(),i("q-inner-loading",{attrs:{showing:e.isNeedLoading}},[i("q-spinner-gears",{attrs:{size:"150px",color:"orange"}})],1)],1)],1):i("q-card",{staticClass:"subscriber__item q-ma-sm"},[i("q-card-section",{staticClass:"q-pa-none"},[i("q-toolbar",{staticClass:"q-pr-none text-white bg-orange"},[i("q-toolbar-title",[e._v("Subscriber")]),i("q-btn",{attrs:{round:"",flat:"",disable:!e.isValidSubscriber,icon:"mdi-play"},on:{click:e.subscribeMessageHandler}},[i("q-tooltip",[e._v("Subscribe")])],1),i("q-btn",{attrs:{round:"",flat:"",icon:"mdi-dots-vertical"}},[i("q-menu",{attrs:{anchor:"bottom right",self:"top right","content-class":"mqtt-board__popup"}},[i("q-list",[i("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"},{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""},on:{click:function(t){return e.$emit("hide")}}},[i("q-item-section",{attrs:{avatar:""}},[i("q-icon",{attrs:{name:"mdi-eye-off-outline"}})],1),i("q-item-section",[i("q-item-label",[e._v("Hide pannel")])],1)],1),i("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"},{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""},on:{click:function(t){return e.removeSubscriber()}}},[i("q-item-section",{attrs:{avatar:""}},[i("q-icon",{attrs:{color:"red",name:"mdi-delete-outline"}})],1),i("q-item-section",[i("q-item-label",[e._v("Remove")])],1)],1)],1)],1)],1)],1)],1),i("q-card-section",{staticClass:"item__main q-py-none"},[i("div",{staticClass:"q-pt-md"},[i("q-input",{staticClass:"q-mb-xs",attrs:{disable:e.status,autogrow:"",type:"aria",color:"grey-9",outlined:"","hide-bottom-space":"",label:"Topic",error:e.validateSetting("topic"),"error-message":e.getValidateMessage("topic"),"reactive-rules":"","no-error-icon":""},model:{value:e.config.topic,callback:function(t){e.$set(e.config,"topic",t)},expression:"config.topic"}},[i("q-icon",{attrs:{slot:"after",name:"mdi-information-outline"},slot:"after"},[i("q-tooltip",[e._v(e._s(e.getDescription("topic")))])],1),0===e.config.topic.indexOf("$share")?i("q-btn",{attrs:{slot:"append",color:"yellow-9",icon:"mdi-alert",flat:"",round:""},on:{click:e.showSharedSubscriptionNotification},slot:"append"}):e._e(),e.isFlespiMode?i("q-btn",{attrs:{slot:"append",color:"red-9",icon:"icon-flespi2-02-01",flat:"",round:""},on:{click:function(t){e.flespiTopicOpened=!0}},slot:"append"},[i("q-tooltip",[e._v("Flespi topic generator")])],1):e._e()],1),i("q-btn-toggle",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-mt-md",staticStyle:{width:"100%"},attrs:{flat:"",rounded:"","toggle-text-color":"grey-9","text-color":"grey-6",options:e.modeSelectOptions},on:{input:e.changeModeHandler},model:{value:e.config.mode,callback:function(t){e.$set(e.config,"mode",t)},expression:"config.mode"}}),1===e.config.mode&&5===e.version?i("q-input",{staticClass:"q-my-xs",attrs:{color:"grey-9",outlined:"","hide-bottom-space":"",label:"Field to group by",hint:"User properties field name by which messages will be grouped."},model:{value:e.config.treeField,callback:function(t){e.$set(e.config,"treeField",t)},expression:"config.treeField"}}):e._e(),i("q-toggle",{staticClass:"q-my-md",attrs:{color:"grey-9",label:"Highlight messages content"},model:{value:e.config.highlight,callback:function(t){e.$set(e.config,"highlight",t)},expression:"config.highlight"}}),i("q-expansion-item",{staticClass:"q-mt-sm q-mb-sm bg-grey-2",attrs:{value:!0,label:"Options"}},[i("div",[i("div",{staticClass:"q-mx-md",staticStyle:{"line-height":"34px"}},[i("div",{staticStyle:{width:"calc(100% - 36px)",display:"inline-flex"}},[e._v("\n                QoS\n                "),i("q-btn-toggle",{staticClass:"q-ml-sm",attrs:{disable:e.status,flat:"",rounded:"","toggle-text-color":"grey-9","text-color":"grey-6",options:[{label:"0",value:0},{label:"1",value:1},{label:"2",value:2}]},model:{value:e.config.options.qos,callback:function(t){e.$set(e.config.options,"qos",t)},expression:"config.options.qos"}})],1),i("q-icon",{staticStyle:{"margin-left":"12px"},attrs:{slot:"after",size:"24px",color:"grey-7",name:"mdi-information-outline"},slot:"after"},[i("q-tooltip",{attrs:{"max-width":"200px"}},[e._v(e._s(e.getDescription("options.qos")))])],1)],1),5===e.version?i("div",{staticClass:"q-mr-md q-ml-sm"},[i("q-checkbox",{staticStyle:{width:"calc(100% - 36px)"},attrs:{disable:e.status,color:"grey-9",label:"No local"},model:{value:e.config.options.nl,callback:function(t){e.$set(e.config.options,"nl",t)},expression:"config.options.nl"}}),i("q-icon",{staticStyle:{"margin-left":"12px"},attrs:{slot:"after",size:"24px",color:"grey-7",name:"mdi-information-outline"},slot:"after"},[i("q-tooltip",{attrs:{"max-width":"200px"}},[e._v(e._s(e.getDescription("options.nl")))])],1)],1):e._e(),5===e.version?i("div",{staticClass:"q-mr-md q-ml-sm"},[i("q-checkbox",{staticStyle:{width:"calc(100% - 36px)"},attrs:{disable:e.status,color:"grey-9",label:"Retain as Published"},model:{value:e.config.options.rap,callback:function(t){e.$set(e.config.options,"rap",t)},expression:"config.options.rap"}}),i("q-icon",{staticStyle:{"margin-left":"12px"},attrs:{slot:"after",size:"24px",color:"grey-7",name:"mdi-information-outline"},slot:"after"},[i("q-tooltip",{attrs:{"max-width":"200px"}},[e._v(e._s(e.getDescription("options.rap")))])],1)],1):e._e(),5===e.version?i("div",{staticClass:"q-mx-md",staticStyle:{"line-height":"34px"}},[i("div",{staticStyle:{width:"calc(100% - 36px)",display:"inline-flex"}},[e._v("\n                Retain handling\n                "),i("q-btn-toggle",{staticClass:"q-ml-sm",attrs:{disable:e.status,flat:"",rounded:"","toggle-text-color":"grey-9","text-color":"grey-6",options:[{label:"0",value:0},{label:"1",value:1},{label:"2",value:2}]},model:{value:e.config.options.rh,callback:function(t){e.$set(e.config.options,"rh",t)},expression:"config.options.rh"}})],1),i("q-icon",{staticStyle:{"margin-left":"12px"},attrs:{slot:"after",size:"24px",color:"grey-7",name:"mdi-information-outline"},slot:"after"},[i("q-tooltip",{attrs:{"max-width":"200px"}},[e._v(e._s(e.getDescription("options.rh")))])],1)],1):e._e(),5===e.version?i("q-expansion-item",{staticClass:"q-mt-sm bg-grey-4",attrs:{label:"Properties"}},[i("div",{staticClass:"q-px-md q-py-sm"},[i("q-input",{staticClass:"q-my-xs",attrs:{disable:e.status,color:"grey-9",label:"Subscription identifier",type:"number",outlined:"","hide-bottom-space":"",error:e.validateSetting("options.properties.subscriptionIdentifier"),"error-message":e.getValidateMessage("options.properties.subscriptionIdentifier"),"no-error-icon":""},on:{input:function(t){t||(e.config.options.properties.subscriptionIdentifier=void 0)}},model:{value:e.config.options.properties.subscriptionIdentifier,callback:function(t){e.$set(e.config.options.properties,"subscriptionIdentifier",e._n(t))},expression:"config.options.properties.subscriptionIdentifier"}},[i("q-icon",{attrs:{slot:"after",name:"mdi-information-outline"},slot:"after"},[i("q-tooltip",[e._v(e._s(e.getDescription("options.properties.subscriptionIdentifier")))])],1)],1),!e.status||e.config.options.properties.userProperties?i("div",[i("div",{staticClass:"q-mt-md q-mb-sm"},[i("div",{staticStyle:{width:"calc(100% - 36px)",display:"inline-flex"}},[e._v("User Properties")]),i("q-icon",{staticStyle:{"margin-left":"12px"},attrs:{slot:"after",size:"24px",color:"grey-7",name:"mdi-information-outline"},slot:"after"},[i("q-tooltip",[e._v(e._s(e.getDescription("options.properties.userProperties")))])],1)],1),i("q-checkbox",{staticClass:"q-mt-sm q-mb-sm",staticStyle:{display:"flex"},attrs:{color:"grey-9",label:"Also use to unsubscribe"},model:{value:e.needUseSubUserPropsToUnsub,callback:function(t){e.needUseSubUserPropsToUnsub=t},expression:"needUseSubUserPropsToUnsub"}}),i("div",[e.config.options.properties.userProperties?i("q-list",{staticClass:"q-mb-xs"},e._l(e.config.options.properties.userProperties,(function(t,s){return i("q-item",{key:s+": "+t,staticStyle:{"min-height":"17px"}},[e.status?e._e():i("q-icon",{staticClass:"q-mr-sm cursor-pointer",attrs:{size:"1rem",name:"mdi-close-circle"},nativeOn:{click:function(t){return e.removeSubscriberUserProperty(s)}}}),i("span",[e._v(e._s(s+": "+t))])],1)})),1):e._e(),e.status?e._e():i("q-input",{staticClass:"q-my-xs",attrs:{outlined:"","hide-bottom-space":"",color:"grey-9",label:"User property name"},model:{value:e.subscriberUserProperty.name,callback:function(t){e.$set(e.subscriberUserProperty,"name",t)},expression:"subscriberUserProperty.name"}}),e.status?e._e():i("q-input",{staticClass:"q-my-xs",attrs:{outlined:"","hide-bottom-space":"",color:"grey-9",label:"User property value"},model:{value:e.subscriberUserProperty.value,callback:function(t){e.$set(e.subscriberUserProperty,"value",t)},expression:"subscriberUserProperty.value"}}),e.status?e._e():i("q-btn",{staticClass:"q-mt-sm",staticStyle:{width:"100%"},attrs:{disable:!e.subscriberUserProperty.name||!e.subscriberUserProperty.value,color:"grey-9"},on:{click:e.addSubscriberUserProperty}},[e._v("Add")])],1)],1):e._e()],1)]):e._e(),i("q-separator",{attrs:{dark:"",color:"grey-5"}}),5!==e.version||e.needUseSubUserPropsToUnsub?e._e():i("q-expansion-item",{staticClass:"q-mb-sm bg-grey-4",attrs:{value:!!e.config.unsubscribeProperties.userProperties,label:"Unsubscribe properties"}},[!e.status||e.config.unsubscribeProperties.userProperties?i("div",{staticClass:"q-px-md q-py-sm"},[i("div",{staticClass:"q-mt-md q-mb-sm"},[i("div",{staticStyle:{width:"calc(100% - 36px)",display:"inline-flex"}},[e._v("User Properties")]),i("q-icon",{staticStyle:{"margin-left":"12px"},attrs:{slot:"after",size:"24px",color:"grey-7",name:"mdi-information-outline"},slot:"after"},[i("q-tooltip",[e._v(e._s(e.getDescription("unsubscribeProperties.userProperties")))])],1)],1),i("div",[e.config.unsubscribeProperties.userProperties?i("q-list",{staticClass:"q-mb-xs"},e._l(e.config.unsubscribeProperties.userProperties,(function(t,s){return i("q-item",{key:s+": "+t,staticStyle:{"min-height":"17px"}},[e.status?e._e():i("q-icon",{staticClass:"q-mr-sm cursor-pointer",attrs:{size:"1rem",name:"mdi-close-circle"},nativeOn:{click:function(t){return e.removeUnsubscribeUserProperty(s)}}}),i("span",[e._v(e._s(s+": "+t))])],1)})),1):e._e(),e.status?e._e():i("q-input",{staticClass:"q-my-xs",attrs:{color:"grey-9",outlined:"","hide-bottom-space":"",label:"User property name"},model:{value:e.unsubscribeUserProperty.name,callback:function(t){e.$set(e.unsubscribeUserProperty,"name",t)},expression:"unsubscribeUserProperty.name"}}),e.status?e._e():i("q-input",{staticClass:"q-my-xs",attrs:{color:"grey-9",outlined:"","hide-bottom-space":"",label:"User property value"},model:{value:e.unsubscribeUserProperty.value,callback:function(t){e.$set(e.unsubscribeUserProperty,"value",t)},expression:"unsubscribeUserProperty.value"}}),e.status?e._e():i("q-btn",{staticClass:"q-mt-sm",staticStyle:{width:"100%"},attrs:{disable:!e.unsubscribeUserProperty.name||!e.unsubscribeUserProperty.value,color:"grey-9"},on:{click:e.addUnsubscribeUserProperty}},[e._v("Add")])],1)]):e._e()])],1)])],1)])],1),e.flespiTopicOpened?i("flespi-topic-configurator",{ref:"ftopic",attrs:{opened:e.flespiTopicOpened,color:"orange",bus:e.client.restBus},on:{close:function(t){e.flespiTopicOpened=!1}},model:{value:e.config.topic,callback:function(t){e.$set(e.config,"topic",t)},expression:"config.topic"}}):e._e()],1)},B=[],W=(i("f751"),function(){var e,t,i=this,s=i.$createElement,r=i._self._c||s;return r("q-dialog",{attrs:{"content-class":"mqtt-board__popup",maximized:i.$q.platform.is.mobile},model:{value:i.opened,callback:function(e){i.opened=e},expression:"opened"}},[r("q-card",{style:{minWidth:i.$q.platform.is.mobile?"100%":"30vw"}},[r("q-card-section",{staticClass:"q-pa-none"},[r("q-toolbar",{class:(e={},e["bg-"+i.color]=!0,e["text-white"]=!!i.color,e)},[r("q-toolbar-title",[i._v("\n          Flespi topic generator\n        ")])],1)],1),r("q-separator"),r("q-card-section",{staticClass:"scroll",style:{height:i.$q.platform.is.mobile?"calc(100% - 96px)":""}},[r("flespi-selector",{attrs:{value:this.currentTopic,connector:i.bus,theme:{color:"orange"}},on:{input:i.update}})],1),r("q-separator"),r("q-card-actions",{class:(t={},t["bg-"+i.color]=!0,t["text-white"]=!!i.color,t),attrs:{align:"right"}},[r("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",dense:""},on:{click:function(e){return i.$emit("close")}}},[i._v("Close")]),r("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",dense:""},on:{click:i.saveSettingsHandler}},[i._v("Save")])],1)],1)],1)}),J=[],X=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[e.$q.platform.is.desktop?i("q-btn-toggle",{staticClass:"q-mb-md",attrs:{options:e.options,spread:"",unelevated:"","toggle-color":e.cTheme.color},model:{value:e.entity,callback:function(t){e.entity=t},expression:"entity"}}):i("q-select",{staticClass:"q-mb-md",attrs:{options:e.options,"emit-value":"","map-options":"",outlined:"",dense:"",color:e.cTheme.color},model:{value:e.entity,callback:function(t){e.entity=t},expression:"entity"}}),i("div",{staticClass:"relative-position"},[e.entity?e._e():i("div",{staticClass:"selectors__settings-splash"}),e.renderConfig.selectors?e._l(e.renderConfig.selectors,(function(t){return i("div",{key:e.entity+"-"+t.name},[i("q-select",{staticClass:"q-mb-md",attrs:{value:e.model[t.name],options:e.renderLists[t.name],"emit-value":"","map-options":"",multiple:"",clearable:"","use-input":"","use-chips":"",outlined:"",dense:"",color:e.cTheme.color,label:e.model[t.name]?t.name:"All "+t.name},on:{input:function(i){return e.update(t.name,i)},filter:function(i,s){return e.filterItems(t,i,s)}},scopedSlots:e._u([{key:"no-option",fn:function(){return[i("q-item",[i("q-item-section",[i("div",{staticClass:"text-italic text-grey-9 text-h6 text-center text-bold"},[e._v(e._s("No "+t.name))]),i("div",{staticClass:"text-grey text-center"},[e._v("Maybe you need to clean another related selectors")])])],1)]},proxy:!0},{key:"option",fn:function(t){return[i("q-item",e._g(e._b({},"q-item",t.itemProps,!1),t.itemEvents),[i("q-item-section",[i("q-item-label",{domProps:{innerHTML:e._s(t.opt.label||"*Empty*")}}),i("q-item-label",{attrs:{caption:""}},[e._v(e._s(t.opt.value))])],1)],1)]}}],null,!0)})],1)})):e._e(),e.renderConfig.children?[i("flespi-selectors",{key:e.entity,attrs:{value:e.value,config:e.renderConfig.children,connector:e.connector,entities:e.model,theme:e.cTheme},on:{input:e.updateModel}})]:e._e()],2)],1)},Q=[],Y=(i("3b2b"),i("db97"));function K(e,t){var i;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(i=G(e))||t&&e&&"number"===typeof e.length){i&&(e=i);var s=0,r=function(){};return{s:r,n:function(){return s>=e.length?{done:!0}:{done:!1,value:e[s++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,o=!0,a=!1;return{s:function(){i=e[Symbol.iterator]()},n:function(){var e=i.next();return o=e.done,e},e:function(e){a=!0,n=e},f:function(){try{o||null==i.return||i.return()}finally{if(a)throw n}}}}function G(e,t){if(e){if("string"===typeof e)return Z(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?Z(e,t):void 0}}function Z(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,s=new Array(t);i<t;i++)s[i]=e[i];return s}function ee(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function te(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?ee(Object(i),!0).forEach((function(t){d()(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):ee(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var ie={name:"FlespiSelectors",props:{config:{type:Object,default:function(){return Y}},connector:Object,entities:{type:Object,default:function(){return{}}},value:String,theme:Object,default:function(){return{color:"grey-9",bgColor:"white"}}},data:function(){var e=void 0,t={},i={},s="";return{entity:e,lists:i,renderLists:te({},i),model:t,topic:s,cTheme:te({color:"grey-9",bgColor:"white"},this.theme)}},computed:{options:function(){return Object.keys(this.config).map((function(e){return{label:e,value:e}}))},entitiesNames:function(){return Object.keys(this.config)},renderConfig:function(){return this.entity?this.config[this.entity]:this.config[this.entitiesNames[0]]}},methods:{initByEntity:function(e){var t=this.config[e].selectors,i={},s={};return t&&t.forEach((function(e){e.value&&(s[e.name]=null),e.list?(i[e.name]=e.list,i[e.name].inited=!0):(i[e.name]=[],i[e.name].inited=!1)})),{lists:i,model:s}},filterItems:function(e,t,i){var s,r=this;if(this.lists[e.name].inited)return this.$set(this.renderLists,e.name,t?this.lists[e.name].filter((function(e){return e.label.toLowerCase().indexOf(t.toLowerCase())>-1})):this.lists[e.name]),void i();(s=this.connector)[e.getter.name].apply(s,o()(e.getter.params.map((function(e){return r.model[e]||"all"})))).then((function(s){r.$set(r.lists,e.name,s),r.$set(r.renderLists,e.name,t?r.lists[e.name].filter((function(e){return e.label.toLowerCase().indexOf(t.toLowerCase())>-1})):r.lists[e.name]),r.lists[e.name].inited=!0,i()}))},update:function(e,t){var i=this;this.$set(this.model,e,t&&t.length?t:null),this.entity&&this.config[this.entity].selectors&&this.config[this.entity].selectors.forEach((function(t){t.getter&&t.getter.params&&t.getter.params.includes(e)&&(i.$set(i.lists,t.name,[]),i.$set(i.renderLists,t.name,[]))})),this.$emit("input",this.getCurrentTopic(this.topic,this.model))},updateModel:function(e){this.topic=e,this.$emit("input",this.getCurrentTopic(this.topic,this.model))},getCurrentTopic:function(e,t){var i=e&&e.topicPattern;if(e&&this.entity&&this.config[this.entity].selectors){var s=this.config[this.entity].selectors.map((function(e){return e.name}));i=s.reduce((function(e,i){var s=i,r=t[s];return void 0!==r&&(e=r&&r.length?e.replace("${".concat(s,"}"),r):e.replace("${".concat(s,"}"),"+")),e}),i)}return te(te({},e),{},{topicPattern:i})},topicToModelHandler:function(e){function t(e){var i=[];for(var s in e){var r=e[s],n=[s],a=r.topic&&r.topic.topicPattern;if(r.children){var l,c=t(r.children),p=K(c);try{for(p.s();!(l=p.n()).done;){var u=l.value;i.push({path:[].concat(n,o()(u.path)),topic:u.topic})}}catch(d){p.e(d)}finally{p.f()}}else i.push({path:n,topic:a})}return i}var i,s=t(this.config),r=s.filter((function(t){t.path;var i=t.topic;return i=new RegExp(i.replace(/\$\{\w+\}/g,".*")),i.test(e)})),n=r.pop();if(n){i={path:n.path,values:{}};var a=n.topic.split("/"),l=e.split("/");a.forEach((function(e,t){e.replace(/\$\{(\w+)\}/,(function(e,s){var r=l[t];i.values[s]="+"===r?null:r.split(",")}))}))}return i},setModel:function(e){if(!e)return!1;var t=this.initByEntity(e.path[0]),i=t.lists,s=t.model;this.entity=e.path[0],this.lists=i,this.model=Object.assign(s,e.values),this.topic=this.config[e.path[0]].topic,this.topic&&this.$emit("input",this.getCurrentTopic(this.topic,this.model))},changeEntity:function(e){var t=this.initByEntity(e),i=t.lists,s=t.model;this.lists=i,this.model=te(te({},s),this.entities),this.topic=this.config[e].topic,this.topic&&this.$emit("input",this.getCurrentTopic(this.topic,this.model))}},created:function(){this.setModel(this.topicToModelHandler(this.value));var e=this.getCurrentTopic(this.topic,this.model);this.$watch("entity",this.changeEntity),e&&this.$emit("input",e)},watch:{entities:{deep:!0,handler:function(e){if(this.model=te(te({},this.model),e),this.entity){var t=this.initByEntity(this.entity),i=t.lists;this.lists=i}}}}},se=ie,re=(i("049c"),i("2877")),ne=Object(re["a"])(se,X,Q,!1,null,null,null),oe=ne.exports,ae={name:"FlespiTopicConfigurator",props:{color:{type:String,default:"grey-9"},value:String,bus:Object,opened:Boolean},data:function(){return{currentTopic:this.value}},methods:{saveSettingsHandler:function(){this.$emit("input",this.currentTopic),this.$emit("close")},update:function(e){var t=e.topicPattern;t&&(this.currentTopic=t)}},components:{FlespiSelector:oe}},le=ae,ce=Object(re["a"])(le,W,J,!1,null,null,null),pe=ce.exports,ue=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticStyle:{"user-select":"none"},style:e.$q.platform.is.desktop?{display:"inline-block",minWidth:"100%"}:[]},[e._l(e.limitedKeys,(function(t,s){return[i("div",{key:""+t,staticClass:"cursor-pointer",class:{"bg-grey-2":e.topic&&e.topic===e.data[t].topic},style:{paddingLeft:10*e.nesting+(e.data[t].children?0:14)+"px",display:e.$q.platform.is.desktop?"inline-block":"",minWidth:e.$q.platform.is.desktop?"100%":"",overflow:e.$q.platform.is.desktop?"":"hidden",textOverflow:e.$q.platform.is.desktop?"":"ellipsis"},on:{click:function(i){return e.toggle(t,s)}}},[e.data[t].children?[e.showObj[t]?i("q-icon",{staticStyle:{"vertical-align":"baseline"},attrs:{color:"grey-9",name:"mdi-menu-down"}}):i("q-icon",{staticStyle:{"vertical-align":"baseline"},attrs:{color:"grey-9",name:"mdi-menu-right"}})]:e._e(),i("span",{class:{"text-grey-9":!0,"text-italic":!t,"text-grey-10":e.data[t].value,"text-bold":e.data[t].value}},[e._v(e._s(t||"*Empty*"))])],2),e.showObj[t]&&e.data[t].children?i("tree-mode-view",{key:"nest-"+t,attrs:{nesting:e.nesting+1,topic:e.topic,data:e.data[t].children},on:{change:function(t){e.$emit("change",t)}}}):e._e()]})),e.keys.length>e.limitedKeys.length?i("div",{staticClass:"more-button cursor-pointer text-bold",staticStyle:{display:"inline-block"},style:{marginLeft:10*e.nesting+14+"px"},on:{click:function(t){e.limit+=1e3}}},[e._v("\n    more "+e._s(e.keys.length-e.limit>=1e3?1e3:e.keys.length-e.limit)+"\n  ")]):e._e()],2)},de=[],me=(i("c5f6"),{name:"TreeModeView",props:{data:Object,topic:String,nesting:{type:Number,default:0}},data:function(){for(var e={},t=Object.keys(this.data),i=t.length,s=0,r=i;s<r;s++)e[t[s]]=!1;return{showObj:e,limit:1e4}},computed:{keys:function(){return Object.keys(this.data).sort((function(e,t){if(e=e.toLowerCase(),t=t.toLowerCase(),e!==t){var i=Number(e),s=Number(t);return i+""===e&&s+""===t?i-s:e>t?1:-1}}))},limitedKeys:function(){return this.keys.slice(0,this.limit)}},methods:{toggle:function(e,t){this.$set(this.showObj,e,!this.showObj[e]),this.$emit("change",this.data[e].topic)}}}),fe=me,be=(i("fbcf"),Object(re["a"])(fe,ue,de,!1,null,null,null)),he=be.exports,ge=i("89c1"),ve=i.n(ge),ye=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("q-card",{staticClass:"message q-my-sm q-mx-sm"},[i("div",{staticClass:"message__title q-pt-sm q-pl-sm q-pr-sm"},[i("div",{staticClass:"message__topic ellipsis",attrs:{title:e.message.topic}},[e._v("\n      "+e._s(e.message.topic)+"\n    ")]),i("div",{staticClass:"message__sys text-grey-7"},[e._v("\n      "+e._s("qos: "+e.message.qos+", dup: "+(e.message.dup?"+":"-")+", retain: "+(e.message.retain?"+":"-")+e.timestamp)+"\n    ")]),i("q-btn",{staticClass:"absolute-top-right",staticStyle:{top:"10px",right:"8px",transform:"rotate(-45deg)"},attrs:{color:"indigo-4",size:"sm",flat:"",icon:"mdi-send",round:""},on:{click:function(t){return e.$emit("action-send",e.message)}}},[i("q-tooltip",{staticClass:"desktop-only"},[e._v("Resend message")])],1)],1),i("div",{staticClass:"message__payload q-pa-sm q-mr-xs q-ml-xs bg-grey-2 relative-position"},["string"!==typeof e.payload||e.payload.length?e.highlight?i("json-tree",{attrs:{data:e.payload}}):e.highlight?e._e():i("div",{staticClass:"message__payload q-pa-sm q-mr-xs q-ml-xs bg-grey-2"},[e._v(e._s(e.message.payload))]):i("div",[e._v("No message")]),e.canCopy?i("q-btn",{staticStyle:{position:"absolute",right:"0",bottom:"2px"},attrs:{icon:"content_copy",size:"0.7rem",flat:"",color:"orange"},on:{click:e.copyPayloadHandler}}):e._e()],1),i("div",{staticClass:"message__properties q-pa-sm text-grey-7"},[e._v(e._s(JSON.stringify(e.message.properties)))])])},qe=[],xe=i("bd4c"),_e=i("cdde"),Se=function(){var e,t=this,i=t.$createElement,s=t._self._c||i;return t.data&&(Array.isArray(t.data)||"object"===typeof t.data)?s("div",[s("span",{class:{"text-white":void 0!==t.inverted}},[t._v(t._s(Array.isArray(t.data)?"[":"{"))]),t._l(t.data,(function(e,i,r){var n;return s("div",{key:i+"-"+r,staticClass:"margin-left"},[e&&"object"===typeof e?s("div",[s("div",{staticClass:"cursor-pointer",on:{click:function(e){t.toggle(Array.isArray(t.data)?i:r)}}},[t.showObj[Array.isArray(t.data)?i:r]?s("q-icon",{staticStyle:{"vertical-align":"baseline"},attrs:{color:void 0!==t.inverted?"white":"grey-9",name:"mdi-menu-down"}}):s("q-icon",{staticStyle:{"vertical-align":"baseline"},attrs:{color:void 0!==t.inverted?"white":"grey-9",name:"mdi-menu-right"}}),s("span",{class:[t.theme.label]},[t._v(t._s(i))]),s("span",{class:{"text-white":void 0!==t.inverted}},[t._v(" : "+t._s(Array.isArray(e)?"Array ["+e.length+"]":"Object"))])],1),t.showObj[Array.isArray(t.data)?i:r]?s("json-tree",{staticClass:"margin-left",attrs:{data:e,inverted:t.inverted}}):t._e()],1):s("div",[s("span",{class:[t.theme.label]},[t._v(t._s(i))]),s("span",{class:{"text-white":void 0!==t.inverted}},[t._v(" : ")]),s("span",{class:(n={},n[t.theme.typeNumberOrBool]="number"===typeof e||"boolean"===typeof e,n[t.theme.typeString]="string"===typeof e,n[t.theme.typeEmpty]="undefined"===typeof e||null===e,n)},[t._v(t._s(JSON.stringify(e)))])])])})),s("span",{class:{"text-white":void 0!==t.inverted}},[t._v(t._s(Array.isArray(t.data)?"]":"}"))])],2):s("div",[s("span",{class:(e={},e[t.theme.typeNumberOrBool]="number"===typeof t.data||"boolean"===typeof t.data,e[t.theme.typeString]="string"===typeof t.data,e[t.theme.typeEmpty]="undefined"===typeof t.data||null===t.data,e),staticStyle:{"font-size":"1rem"}},[t._v(t._s(""+t.data))])])},we=[],Ce={name:"JsonTree",props:{data:{requered:!0},inverted:function(){return!0}},data:function(){for(var e=[],t=this.data?Object.keys(this.data).length:0,i=0,s=t;i<s;i++)e.push(!0);return{showObj:e}},computed:{theme:function(){return void 0!==this.inverted?{label:"text-pink-4",typeString:"text-red-3",typeNumberOrBool:"text-blue-3",typeEmpty:"text-grey-5"}:{label:"text-pink-8",typeString:"text-red-6",typeNumberOrBool:"text-blue-6",typeEmpty:"text-grey-6"}}},methods:{toggle:function(e){this.$set(this.showObj,e,!this.showObj[e])}}},ke=Ce,Pe=(i("ab66"),Object(re["a"])(ke,Se,we,!1,null,null,null)),$e=Pe.exports,Me={name:"Message",props:["message","highlight"],computed:{canCopy:function(){return!("string"===typeof this.payload&&!this.payload.length)&&!!_e["a"]},payload:function(){return this.message.payload},timestamp:function(){return this.message.properties&&this.message.properties.userProperties&&this.message.properties.userProperties.timestamp?", ".concat(xe["a"].formatDate(1e3*this.message.properties.userProperties.timestamp,"DD/MM/YYYY HH:mm:ss")):""}},methods:{copyPayloadHandler:function(){var e=this;Object(_e["a"])("string"===typeof this.payload?this.payload:JSON.stringify(this.payload)).then((function(t){e.$q.notify({color:"positive",icon:"content_copy",message:'<div class="text-center" style="font-size: 1.2rem;">Payload copied</div>',html:!0,timeout:1e3})}),(function(t){e.$q.notify({color:"negative",icon:"content_copy",message:'<div class="text-center" style="font-size: 1.2rem;">Coping error</div>',html:!0,timeout:1e3})}))}},components:{JsonTree:$e}},Oe=Me,Ie=(i("04a0"),Object(re["a"])(Oe,ye,qe,!1,null,"299524db",null)),Te=Ie.exports,Ue={clientName:{desc:"Human readable client name",type:"String"},clientId:{desc:"The Client Identifier (ClientID) identifies the Client on the Server",type:"String",required:!0},host:{desc:"It`s a web app so you can use wss protocol only",type:"String",required:!0},keepalive:{desc:"Maximum time interval that is permitted to elapse between the point at which the Client finishes transmitting one MQTT Control Packet and the point it starts sending the next",type:"Number",min:0,max:65535,required:!0},protocolVersion:{desc:"Revision level of the protocol used by the Client",type:"Number",options:[3,4,5]},clean:{desc:"If true, instructs the connection to start a new session; if false, instructs to continue an existing session",type:"Boolean"},username:{desc:"Client username (valid flespi token)",type:"String"},password:{desc:"Client password (should be left blank for flespi)",type:"String"},properties:{sessionExpiryInterval:{desc:"Session Expiry Interval in seconds",type:"Number",min:0,max:4294967295},receiveMaximum:{desc:"Receive Maximum value in bytes",type:"Number",min:1,max:65535},maximumPacketSize:{desc:"Maximum Packet Size in bytes the Client is willing to accept",type:"Number",min:1,max:4294967295},topicAliasMaximum:{desc:"The highest value that the Client will accept as a Topic Alias sent by the Server",type:"Number",min:0,max:65535},requestResponseInformation:{desc:"Run a Request/Response interaction over MQTT",type:"Boolean"},requestProblemInformation:{desc:"The Client uses this value to indicate whether the Reason String or User Properties are sent in the case of failures",type:"Boolean"},userProperties:{desc:"Used to send connection-related properties from the Client to the Server",type:"Object"},authenticationMethod:{desc:"Name of the authentication method used for extended authentication",type:"String"},authenticationData:{desc:"Identifier of the authentication data",type:"String"}},will:{topic:{desc:"Topic for will message",type:"String"},payload:{desc:"Will message payload",type:"String"},qos:{desc:"Specify the QoS level to be used when publishing the Will Message",type:"Number",options:[0,1,2]},retain:{desc:"If the Will Message is to be retained when it is published",type:"Boolean"},properties:{willDelayInterval:{desc:"Will Delay Interval in seconds",type:"Number",max:4294967295,min:0},payloadFormatIndicator:{desc:"Identifier of the Payload Format Indicator where false - unspecified, true - String",type:"Boolean"},messageExpiryInterval:{desc:"Message Expiry Interval",type:"Number",max:4294967295,min:1},contentType:{desc:"Content of the Will Message",type:"String"},responseTopic:{desc:"String which is used as the Topic Name for a response message",type:"String"},correlationData:{desc:"Used by the sender of the Request Message to identify which request the Response Message is for when it is received",type:"String"},userProperties:{desc:"Used to send will-related properties",type:"Object"}}}},je={topic:{desc:"String topic to subscribe to",type:"String",required:!0},options:{qos:{desc:"Maximum QoS field. This gives the maximum QoS level at which the Server can send Application Messages to the Client",type:"Number",options:[0,1,2]},nl:{desc:"No Local option. If the value is true, Application Messages MUST NOT be forwarded to a connection with a ClientID equal to the ClientID of the publishing connection",type:"Boolean"},rap:{desc:"Retain As Published option. If true, Application Messages forwarded using this subscription keep the RETAIN flag they were published with. If false, Application Messages forwarded using this subscription have the RETAIN flag set to false",type:"Boolean"},rh:{desc:"Retain Handling option. This option specifies whether retained messages are sent when the subscription is established. \n\r0 = Send retained messages at the time of the subscribe, \n\r1 = Send retained messages at subscribe only if the subscription does not currently exist, \n\r2 = Do not send retained messages at the time of the subscribe",type:"Number",options:[0,1,2]},properties:{subscriptionIdentifier:{desc:"Identifier of the subscription",type:"Number",min:1,max:268435455},userProperties:{desc:"Used to send related properties",type:"Object"}}},unsubscribeProperties:{userProperties:{desc:"Used to send related properties on unsubscribe operation",type:"Object"}}},De={topic:{desc:"The Topic Name identifies the information channel to which Payload data is published",type:"String",required:!0},payload:{desc:"Payload contains the Application Message that is being published",type:"String"},options:{qos:{desc:"Level of assurance for delivery of an Application Message",type:"Number",options:[0,1,2]},retain:{desc:"If the RETAIN flag is set to 1 in a PUBLISH packet sent by a Client to a Server, the Server MUST replace any existing retained message for this topic and store the Application Message",type:"Boolean"},dup:{desc:"If the DUP flag is set to false, it indicates that this is the first occasion that the Client or Server has attempted to send this PUBLISH packet. If the DUP flag is set to true, it indicates that this might be re-delivery of an earlier attempt to send the packet",type:"Boolean"},properties:{payloadFormatIndicator:{type:"Boolean",desc:"Identifier of the Payload Format Indicator where false - unspecified, true - String"},messageExpiryInterval:{desc:"Lifetime of the Application Message in seconds",type:"Number",min:1,max:4294967295},topicAlias:{desc:"Integer value that is used to identify the Topic instead of using the Topic Name",type:"Number",min:0,max:65535},responseTopic:{type:"String",desc:"String used as the Topic Name for a response message"},correlationData:{type:"String",desc:"The Correlation Data is used by the sender of the Request Message to identify which request the Response Message is for when it is received"},userProperties:{type:"Object",desc:"Used to send related properties"},contentType:{type:"String",desc:"String describing the MIME content type of the Application Message"}}}},Ee={type:{type:"String"},index:{type:"Number"},id:{type:"String"}},Ae={settings:Ue,subscriber:je,publisher:De,entity:Ee};function Ne(e,t){var i;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(i=He(e))||t&&e&&"number"===typeof e.length){i&&(e=i);var s=0,r=function(){};return{s:r,n:function(){return s>=e.length?{done:!0}:{done:!1,value:e[s++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,o=!0,a=!1;return{s:function(){i=e[Symbol.iterator]()},n:function(){var e=i.next();return o=e.done,e},e:function(e){a=!0,n=e},f:function(){try{o||null==i.return||i.return()}finally{if(a)throw n}}}}function He(e,t){if(e){if("string"===typeof e)return ze(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?ze(e,t):void 0}}function ze(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,s=new Array(t);i<t;i++)s[i]=e[i];return s}function Le(e){for(var t=e.split("/"),i=0;i<t.length;i++)if("+"!==t[i]){if("#"===t[i])return i===t.length-1;if(-1!==t[i].indexOf("+")||-1!==t[i].indexOf("#"))return!1}return!0}function Re(e){var t="",i=Object.prototype.toString.call(e);return t=i.replace(/\[object /gi,"").replace(/\]/gi,""),t}function Ve(e,t,i){var s=!0,r=k()(Ae,t,void 0);if(void 0!==r.min){var n="Value must be more or equal ".concat(r.min);s=r.min<=e||n}return s}function Fe(e,t,i){var s=!0,r=k()(Ae,t,void 0);if(void 0!==r.max){var n="Value must be less or equal ".concat(r.max);s=r.max>=e||n}return s}function Be(e,t,i){var s=!0,r=k()(Ae,t,void 0);if(void 0!==r.options){var n="Value must be ".concat(r.options.join(" or "));s=r.options.includes(e)||n}return s}function We(e,t,i){var s=!0,r=Ve(e,t,i),n=Fe(e,t,i),o=Be(e,t,i);return"string"===typeof o?s=o:"string"===typeof n?s=n:"string"===typeof r&&(s=r),s}var Je={min:Ve,max:Fe,options:Be,typeDetails:We,types:function(e,t,i){var s=!0,r=this.getType(e),n=k()(Ae,t,void 0),o=r===n.type,a="String"===r&&!e.length,l=We(e,t,i);return n.required?a?s="Value cannot be empty":o?"string"===typeof l&&(s=l):s="Value has invalid type":n.required||"Undefined"===r||(o?"string"===typeof l&&(s=l):s="Value has invalid type"),s},custom:function(e,t,i){var s=!0;if(Xe[t]){var r,n=Ne(Xe[t]);try{for(n.s();!(r=n.n()).done;){var o=r.value,a=o.apply(this,[e,t,i]);if("string"===typeof a){s=a;break}}}catch(l){n.e(l)}finally{n.f()}}return s}},Xe={"settings.host":[function(e,t,i){return!(this.secure&&0===e.indexOf("ws:"))||"Host must be only over secured sockets"}],"publisher.topic":[function(e,t,i){return Le(e)||"Topic is invalid"}],"subscriber.topic":[function(e,t,i){return Le(e)||"Topic is invalid"},function(e,t,i){return-1===e.indexOf(",")||-1!==e.indexOf(",")&&i.options.properties.subscriptionIdentifier||"You need to set up subscription identifier in the properties below"}]},Qe={methods:{getType:Re,validateField:function(e,t,i){for(var s=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=!0,n=["types","custom"],o=0,a=n;o<a.length;o++){var l=a[o],c=Je[l],p=c.apply(this,[e,t,i]);if("string"===typeof p){r=!!s&&p;break}}return r},validateObjectBySchema:function(e,t){var i=this,s=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=k()(Ae,t,{}),n=Object.keys(r).reduce((function(n,o){var a=e[o],l=!!r[o].type,c="".concat(t,".").concat(o),p=!0;return p=l?i.validateField(a,c,e,s):i.validateObjectBySchema(a,c,s),"boolean"===typeof p&&p||(n[o]=p),n}),{}),o=!!Object.keys(n).length;return s&&o||(n=!o),n},validateEntity:function(e){switch(e.type){case"publisher":return this.validatePublisher(e.settings);case"subscriber":return this.validateSubscriber(e.settings);default:return!1}},validateSettings:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.validateObjectBySchema(e,"settings",t)},validatePublisher:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.validateObjectBySchema(e,"publisher",t)},validateSubscriber:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.validateObjectBySchema(e,"subscriber",t)},validateEntityRecord:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.validateObjectBySchema(e,"entity",t)}}},Ye=i("2768"),Ke=i.n(Ye),Ge=0,Ze=1,et={name:"Subscriber",props:["value","messages","status","client","subscribed"],data:function(){return{declarations:je,version:this.client.config.protocolVersion,filterMode:!1,config:this.value,loadingStatus:!1,needUseSubUserPropsToUnsub:!1,subscriberUserProperty:{value:"",name:""},unsubscribeUserProperty:{value:"",name:""},modeSelectOptions:[{label:"List",value:Ge},{label:"Tree",value:Ze}],needAutoScroll:!0,isPlayed:this.status||null,filter:"",treeSelectedTopic:null,processingFlag:null,Message:Te,flespiTopicOpened:!1}},computed:{isFlespiMode:function(){return this.client.config.host.indexOf("flespi")>-1},renderedMessages:function(){var e=this,t=[];switch(this.config.mode){case Ge:t=this.filter?this.messages.filter((function(t){return-1!==t.topic.indexOf(e.filter)})):this.messages;break;case Ze:t=this.messages;break}return t},treeModeValue:function(){var e=this,t=null;if(this.config.mode===Ze){if(null===this.treeSelectedTopic)return{"":{topic:"*Empty*"}};var i=this.treeSelectedTopic.split("/");t=i.reduce((function(t,s,r){return r===i.length-1?t[s]?t[s].value&&Object.keys(t[s].value).reduce((function(e,i){return e[i]=JSON.parse(t[s].value[i]),e}),{}):(e.treeValueChangeHandler(null),{"":{topic:"*Empty*"}}):t[s].children}),this.messages),t&&Object.keys(t).length||(t={"":{topic:this.treeSelectedTopic}})}return t},validationModel:function(){return this.validateSubscriber(this.config,!0)},isValidSubscriber:function(){return!Object.keys(this.validationModel).length},isNeedLoading:function(){return 1===this.config.mode&&this.status&&this.subscribed&&null===this.processingFlag&&this.checkProcessing(),1===this.config.mode&&this.status&&(!this.subscribed||!!this.processingFlag)}},methods:{isNil:Ke.a,checkProcessing:function(){var e=this;Object.keys(this.messages).length||(this.processingFlag=!0,setTimeout((function(){e.processingFlag=!1}),500))},getMessageProps:function(e){var t=this,i={key:"subMsg$".concat(e),props:{highlight:this.config.highlight,message:this.renderedMessages[e]},on:{"action-send":function(e){t.$emit("action-send",e)}}};return i},playStopHandler:function(){this.isPlayed?this.$emit("pause"):this.$emit("play"),this.isPlayed=!this.isPlayed},subscribeMessageHandler:function(){this.loadingStatus=!0,this.needUseSubUserPropsToUnsub&&this.$set(this.config.unsubscribeProperties,"userProperties",Object.assign({},this.config.options.properties.userProperties)),this.$emit("subscribe")},unsubscribeMessageHandler:function(e,t){this.isPlayed=null,this.treeSelectedTopic=null,this.clearScrollParams(),this.$emit("unsubscribe"),this.processingFlag=null},removeSubscriber:function(e){this.$emit("remove")},addSubscriberUserProperty:function(){this.config.options.properties.userProperties||this.$set(this.config.options.properties,"userProperties",{}),this.$set(this.config.options.properties.userProperties,this.subscriberUserProperty.name,this.subscriberUserProperty.value),this.subscriberUserProperty={value:"",name:""}},removeSubscriberUserProperty:function(e){this.$delete(this.config.options.properties.userProperties,e),Object.keys(this.config.options.properties.userProperties).length||this.$set(this.config.options.properties,"userProperties",void 0)},addUnsubscribeUserProperty:function(){this.config.unsubscribeProperties.userProperties||this.$set(this.config.unsubscribeProperties,"userProperties",{}),this.$set(this.config.unsubscribeProperties.userProperties,this.unsubscribeUserProperty.name,this.unsubscribeUserProperty.value),this.unsubscribeUserProperty={value:"",name:""}},removeUnsubscribeUserProperty:function(e){this.$delete(this.config.unsubscribeProperties.userProperties,e),Object.keys(this.config.unsubscribeProperties.userProperties).length||this.$set(this.config.unsubscribeProperties,"userProperties",void 0)},showSharedSubscriptionNotification:function(){this.$q.dialog({title:"Shared subscription info",message:"You are trying to subscribe to a Shared Subscription. Publication that matches its Topic Filter is sent to one of the subscribed sessions only.",color:"primary",ok:!0,preventClose:!0})},listScroll:function(e){if(this.status){var t=this.$refs.scroller&&this.$refs.scroller.$el;if(!t)return!1;t.scrollTop<t.scrollHeight-t.clientHeight?this.needAutoScroll=!1:this.needAutoScroll=!0}},clearScrollParams:function(){this.currentScrollTop=0,this.allScrollTop=0,this.needAutoScroll=!0},clearMessagesHandler:function(){this.$emit("clear")},treeValueChangeHandler:function(e){this.treeSelectedTopic=e},changeModeHandler:function(){this.treeSelectedTopic=null},validateSetting:function(e){return!!k()(this.validationModel,e,!1)},getValidateMessage:function(e){return k()(this.validationModel,e,"")},getDescription:function(e){return k()(this.declarations,"".concat(e,".desc"),"")}},watch:{config:{deep:!0,handler:function(e){this.$emit("input",e)}},status:function(e){e&&this.loadingStatus?(this.loadingStatus=!1,this.isPlayed=!0):e||(this.isPlayed=null)},value:{deep:!0,handler:function(e){this.config=e}}},components:{VirtualList:ve.a,Tree:he,Message:Te,FlespiTopicConfigurator:pe},directives:{autoscroll:{inserted:function(e,t){var i=t.value;i&&(e.scrollTop=e.scrollHeight-e.clientHeight)},componentUpdated:function(e,t){var i=t.value;setTimeout((function(){i&&(e.scrollTop=e.scrollHeight-e.clientHeight)}),50)}}},mixins:[Qe]},tt=et,it=(i("db71"),Object(re["a"])(tt,F,B,!1,null,null,null)),st=it.exports,rt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"mqtt-client__publisher"},[i("q-card",{staticClass:"publisher__item q-ma-sm"},[i("q-card-section",{staticClass:"q-pa-none"},[i("q-toolbar",{staticClass:"q-pr-none text-white bg-indigo"},[i("q-toolbar-title",[e._v("Publisher")]),i("q-btn",{attrs:{round:"",disable:!e.isValidPublisher,flat:"",icon:"mdi-send"},on:{click:function(t){return e.$emit("publish")}}},[i("q-tooltip",[e._v("Publish")])],1),i("q-btn",{attrs:{round:"",flat:"",icon:"mdi-dots-vertical"}},[i("q-menu",{attrs:{anchor:"bottom right",self:"top right","content-class":"mqtt-board__popup"}},[i("q-list",[i("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"},{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""},on:{click:function(t){return e.$emit("hide")}}},[i("q-item-section",{attrs:{avatar:""}},[i("q-icon",{attrs:{name:"mdi-eye-off-outline"}})],1),i("q-item-section",[i("q-item-label",[e._v("Hide pannel")])],1)],1),i("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"},{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""},on:{click:function(t){return e.$emit("remove")}}},[i("q-item-section",{attrs:{avatar:""}},[i("q-icon",{attrs:{color:"red",name:"mdi-delete-outline"}})],1),i("q-item-section",[i("q-item-label",[e._v("Remove")])],1)],1)],1)],1)],1)],1)],1),i("q-card-section",{staticClass:"publisher__main q-pb-none"},[i("div",[i("q-input",{staticClass:"q-mb-xs",attrs:{"no-error-icon":"",color:"grey-9",autogrow:"",type:"aria",label:"Topic",error:e.validateSetting("topic"),"error-message":e.getValidateMessage("topic"),outlined:"","hide-bottom-space":""},model:{value:e.config.topic,callback:function(t){e.$set(e.config,"topic",t)},expression:"config.topic"}},[i("q-icon",{attrs:{slot:"after",name:"mdi-information-outline"},slot:"after"},[i("q-tooltip",[e._v(e._s(e.getDescription("topic")))])],1)],1),i("q-input",{staticClass:"q-mb-xs q-textarea--fix",attrs:{color:"grey-9",outlined:"","hide-bottom-space":"",autogrow:"",type:"textarea",label:"Message"},model:{value:e.config.payload,callback:function(t){e.$set(e.config,"payload",t)},expression:"config.payload"}},[i("q-icon",{attrs:{slot:"after",name:"mdi-information-outline"},slot:"after"},[i("q-tooltip",[e._v(e._s(e.getDescription("payload")))])],1)],1),i("q-expansion-item",{staticClass:"bg-grey-2",attrs:{value:!0,label:"Options"}},[i("div",[i("div",{staticClass:"q-mx-md",staticStyle:{"line-height":"34px"}},[i("div",{staticStyle:{width:"calc(100% - 36px)",display:"inline-flex"}},[e._v("\n                QoS\n                "),i("q-btn-toggle",{staticClass:"q-ml-sm",attrs:{flat:"",rounded:"","toggle-text-color":"grey-9","text-color":"grey-6",options:[{label:"0",value:0},{label:"1",value:1},{label:"2",value:2}]},model:{value:e.config.options.qos,callback:function(t){e.$set(e.config.options,"qos",t)},expression:"config.options.qos"}})],1),i("q-icon",{staticStyle:{"margin-left":"12px"},attrs:{slot:"after",size:"24px",color:"grey-7",name:"mdi-information-outline"},slot:"after"},[i("q-tooltip",[e._v(e._s(e.getDescription("options.qos")))])],1)],1),i("div",{staticClass:"q-mr-md q-ml-sm"},[i("q-checkbox",{staticStyle:{width:"calc(100% - 36px)"},attrs:{color:"grey-9",label:"Retain"},model:{value:e.config.options.retain,callback:function(t){e.$set(e.config.options,"retain",t)},expression:"config.options.retain"}}),i("q-icon",{staticStyle:{"margin-left":"12px"},attrs:{slot:"after",size:"24px",color:"grey-7",name:"mdi-information-outline"},slot:"after"},[i("q-tooltip",{attrs:{"max-width":"200px"}},[e._v(e._s(e.getDescription("options.retain")))])],1)],1),i("div",{staticClass:"q-mr-md q-ml-sm"},[i("q-checkbox",{staticStyle:{width:"calc(100% - 36px)"},attrs:{color:"grey-9",label:"Duplicate flag"},model:{value:e.config.options.dup,callback:function(t){e.$set(e.config.options,"dup",t)},expression:"config.options.dup"}}),i("q-icon",{staticStyle:{"margin-left":"12px"},attrs:{slot:"after",size:"24px",color:"grey-7",name:"mdi-information-outline"},slot:"after"},[i("q-tooltip",{attrs:{"max-width":"200px"}},[e._v(e._s(e.getDescription("options.dup")))])],1)],1),5===e.version?i("q-expansion-item",{staticClass:"q-mt-sm q-mb-sm bg-grey-4",attrs:{label:"Properties"}},[i("div",{staticClass:"q-px-md q-pb-sm"},[i("div",[i("q-checkbox",{staticClass:"q-mt-sm q-mb-sm",staticStyle:{width:"calc(100% - 36px)"},attrs:{color:"grey-9",label:"Payload format indicator"},model:{value:e.config.options.properties.payloadFormatIndicator,callback:function(t){e.$set(e.config.options.properties,"payloadFormatIndicator",t)},expression:"config.options.properties.payloadFormatIndicator"}}),i("q-icon",{staticStyle:{"margin-left":"12px"},attrs:{slot:"after",size:"24px",color:"grey-7",name:"mdi-information-outline"},slot:"after"},[i("q-tooltip",[e._v(e._s(e.getDescription("options.properties.payloadFormatIndicator")))])],1)],1),i("q-input",{staticClass:"q-mb-xs",attrs:{color:"grey-9",type:"number",label:"Message expiry interval",outlined:"","hide-bottom-space":"",error:e.validateSetting("options.properties.messageExpiryInterval"),"error-message":e.getValidateMessage("options.properties.messageExpiryInterval"),"no-error-icon":""},on:{input:function(t){t||(e.config.options.properties.messageExpiryInterval=void 0)}},model:{value:e.config.options.properties.messageExpiryInterval,callback:function(t){e.$set(e.config.options.properties,"messageExpiryInterval",e._n(t))},expression:"config.options.properties.messageExpiryInterval"}},[i("q-icon",{attrs:{slot:"after",name:"mdi-information-outline"},slot:"after"},[i("q-tooltip",[e._v(e._s(e.getDescription("options.properties.messageExpiryInterval")))])],1)],1),i("q-input",{staticClass:"q-mb-xs",attrs:{color:"grey-9",type:"number",label:"Topic alias",outlined:"","hide-bottom-space":"",error:e.validateSetting("options.properties.topicAlias"),"error-message":e.getValidateMessage("options.properties.topicAlias"),"no-error-icon":""},on:{input:function(t){t||(e.config.options.properties.topicAlias=void 0)}},model:{value:e.config.options.properties.topicAlias,callback:function(t){e.$set(e.config.options.properties,"topicAlias",e._n(t))},expression:"config.options.properties.topicAlias"}},[i("q-icon",{attrs:{slot:"after",name:"mdi-information-outline"},slot:"after"},[i("q-tooltip",[e._v(e._s(e.getDescription("options.properties.topicAlias")))])],1)],1),i("q-input",{staticClass:"q-mb-xs",attrs:{color:"grey-9",label:"Response topic",outlined:"","hide-bottom-space":""},model:{value:e.config.options.properties.responseTopic,callback:function(t){e.$set(e.config.options.properties,"responseTopic",t)},expression:"config.options.properties.responseTopic"}},[i("q-icon",{attrs:{slot:"after",name:"mdi-information-outline"},slot:"after"},[i("q-tooltip",[e._v(e._s(e.getDescription("options.properties.responseTopic")))])],1)],1),i("q-input",{staticClass:"q-textarea--fix q-mb-xs",attrs:{color:"grey-9",outlined:"","hide-bottom-space":"",type:"textarea",autogrow:"",label:"Correlation data"},model:{value:e.config.options.properties.correlationData,callback:function(t){e.$set(e.config.options.properties,"correlationData",t)},expression:"config.options.properties.correlationData"}},[i("q-icon",{attrs:{slot:"after",name:"mdi-information-outline"},slot:"after"},[i("q-tooltip",{attrs:{"max-width":"200px"}},[e._v(e._s(e.getDescription("options.properties.correlationData")))])],1)],1),i("q-input",{staticClass:"q-mb-xs",attrs:{color:"grey-9",outlined:"","hide-bottom-space":"",label:"Content type"},model:{value:e.config.options.properties.contentType,callback:function(t){e.$set(e.config.options.properties,"contentType",t)},expression:"config.options.properties.contentType"}},[i("q-icon",{attrs:{slot:"after",name:"mdi-information-outline"},slot:"after"},[i("q-tooltip",[e._v(e._s(e.getDescription("options.properties.contentType")))])],1)],1),i("div",{staticClass:"q-mb-sm"},[i("div",{staticClass:"q-mt-md q-mb-sm"},[i("div",{staticStyle:{width:"calc(100% - 36px)",display:"inline-flex"}},[e._v("User Properties")]),i("q-icon",{staticStyle:{"margin-left":"12px"},attrs:{slot:"after",size:"24px",color:"grey-7",name:"mdi-information-outline"},slot:"after"},[i("q-tooltip",[e._v(e._s(e.getDescription("options.properties.userProperties")))])],1)],1),i("div",[e.config.options.properties.userProperties?i("q-list",{staticClass:"q-mb-xs"},e._l(e.config.options.properties.userProperties,(function(t,s){return i("q-item",{key:s+": "+t,staticStyle:{"min-height":"17px"}},[i("q-icon",{staticClass:"q-mr-sm cursor-pointer",attrs:{size:"1rem",name:"mdi-close-circle"},nativeOn:{click:function(t){return e.removePublishUserProperty(s)}}}),i("span",[e._v(e._s(s+": "+t))])],1)})),1):e._e(),i("q-input",{staticClass:"q-mb-xs",attrs:{color:"grey-9",outlined:"","hide-bottom-space":"",label:"User property name"},model:{value:e.publishUserProperty.name,callback:function(t){e.$set(e.publishUserProperty,"name",t)},expression:"publishUserProperty.name"}}),i("q-input",{staticClass:"q-mb-xs",attrs:{color:"grey-9",outlined:"","hide-bottom-space":"",label:"User property value"},model:{value:e.publishUserProperty.value,callback:function(t){e.$set(e.publishUserProperty,"value",t)},expression:"publishUserProperty.value"}}),i("q-btn",{staticClass:"q-mt-sm",staticStyle:{width:"100%"},attrs:{disable:!e.publishUserProperty.name||!e.publishUserProperty.value,color:"grey-9"},on:{click:function(t){return e.addPublishUserProperty()}}},[e._v("Add")])],1)])],1)]):e._e()],1)])],1)])],1)],1)},nt=[],ot={name:"Publisher",props:["value","version"],data:function(){return{declarations:De,config:this.value,publishUserProperty:{value:"",name:""}}},computed:{validationModel:function(){return this.validatePublisher(this.config,!0)},isValidPublisher:function(){return!Object.keys(this.validationModel).length}},methods:{isNil:Ke.a,addPublishUserProperty:function(){this.config.options.properties.userProperties||this.$set(this.config.options.properties,"userProperties",{});var e=this.config.options.properties.userProperties;e[this.publishUserProperty.name]?Array.isArray(e[this.publishUserProperty.name])?e[this.publishUserProperty.name].push(this.publishUserProperty.value):this.$set(e,this.publishUserProperty.name,[e[this.publishUserProperty.name],this.publishUserProperty.value]):this.$set(e,this.publishUserProperty.name,this.publishUserProperty.value),this.publishUserProperty={value:"",name:""}},removePublishUserProperty:function(e){this.$delete(this.config.options.properties.userProperties,e),Object.keys(this.config.options.properties.userProperties).length||this.$set(this.config.options.properties,"userProperties",void 0)},validateSetting:function(e){return!!k()(this.validationModel,e,!1)},getValidateMessage:function(e){return k()(this.validationModel,e,"")},getDescription:function(e){return k()(this.declarations,"".concat(e,".desc"),"")}},watch:{config:{deep:!0,handler:function(e){this.$emit("input",e)}},value:{deep:!0,handler:function(e){this.config=e}}},mixins:[Qe]},at=ot,lt=(i("57fe"),Object(re["a"])(at,rt,nt,!1,null,null,null)),ct=lt.exports,pt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"mqtt-client__not-resolved-msgs"},[i("q-card",{staticClass:"not-resolved-msgs__main q-ma-sm"},[i("q-card-section",{staticClass:"q-pa-none"},[e.filterMode?i("q-input",{staticClass:"q-ma-sm q-mb-xs",attrs:{color:"grey-9",outlined:"","hide-bottom-space":"",label:"Filter by topic",autofocus:""},model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}},[i("q-btn",{attrs:{slot:"prepend",color:"grey-9",icon:"mdi-arrow-left",flat:"",round:""},on:{click:function(t){e.filterMode=!1,e.filter=""}},slot:"prepend"}),e.filter?i("q-btn",{attrs:{slot:"append",color:"grey-9",icon:"mdi-close",flat:"",round:""},on:{click:function(t){e.filter=""}},slot:"append"}):e._e()],1):i("q-toolbar",{staticClass:"q-pr-none text-white bg-red-6"},[i("q-toolbar-title",[e._v("Unresolved messages")]),i("q-btn",{attrs:{round:"",flat:"",icon:"mdi-magnify"},on:{click:function(t){e.filterMode=!0}}}),i("q-btn",{attrs:{round:"",flat:"",icon:"mdi-dots-vertical"}},[i("q-menu",{attrs:{anchor:"bottom right",self:"top right","content-class":"mqtt-board__popup"}},[i("q-list",[i("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"},{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""},on:{click:function(t){return e.$emit("hide")}}},[i("q-item-section",{attrs:{avatar:""}},[i("q-icon",{attrs:{name:"mdi-eye-off-outline"}})],1),i("q-item-section",[i("q-item-label",[e._v("Hide pannel")])],1)],1),i("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"},{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""},on:{click:e.clearMessagesHandler}},[i("q-item-section",{attrs:{avatar:""}},[i("q-icon",{attrs:{name:"mdi-playlist-remove"}})],1),i("q-item-section",[i("q-item-label",[e._v("Clear messages")])],1)],1)],1)],1)],1)],1)],1),i("virtual-list",{directives:[{name:"autoscroll",rawName:"v-autoscroll",value:e.needAutoScroll,expression:"needAutoScroll"}],ref:"scroller",staticClass:"not-resolved-msgs__list",attrs:{size:110,remain:15,onscroll:e.listScroll}},e._l(e.filteredNotResolvedMessages,(function(e,t){return i("message",{key:"subNRMsg"+t,attrs:{message:e}})})),1)],1)],1)},ut=[],dt={name:"Unresolved",props:["messages"],data:function(){return{filter:"",needAutoScroll:!0,filterMode:!1}},computed:{filteredNotResolvedMessages:function(){var e=this;return this.messages.filter((function(t){return-1!==t.topic.indexOf(e.filter)}))}},methods:{listScroll:function(e,t){var i=this.$refs.scroller&&this.$refs.scroller.$el;if(!i)return!1;i.scrollTop<i.scrollHeight-i.clientHeight?this.needAutoScroll=!1:this.needAutoScroll=!0},clearMessagesHandler:function(){this.$emit("clear")}},components:{VirtualList:ve.a,Message:Te},directives:{autoscroll:{inserted:function(e,t){var i=t.value;i&&(e.scrollTop=e.scrollHeight-e.clientHeight)},componentUpdated:function(e,t){var i=t.value;setTimeout((function(){i&&(e.scrollTop=e.scrollHeight-e.clientHeight)}),50)}}}},mt=dt,ft=(i("744b"),Object(re["a"])(mt,pt,ut,!1,null,null,null)),bt=ft.exports,ht=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"mqtt-client__logs"},[i("q-card",{staticClass:"logs__wrapper q-ma-sm",staticStyle:{overflow:"hidden"}},[i("q-card-section",{staticClass:"q-pa-none"},[i("q-toolbar",{staticClass:"q-pr-none text-white bg-blue"},[i("q-toolbar-title",[e._v("Logs")]),i("q-btn",{attrs:{round:"",flat:"",icon:"mdi-dots-vertical"}},[i("q-menu",{attrs:{anchor:"bottom right",self:"top right","content-class":"mqtt-board__popup"}},[i("q-list",[i("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"},{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""},on:{click:e.clearLogsHandler}},[i("q-item-section",{attrs:{avatar:""}},[i("q-icon",{attrs:{name:"mdi-playlist-remove"}})],1),i("q-item-section",[i("q-item-label",[e._v("Clear logs")])],1)],1),i("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"},{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""},on:{click:function(t){return e.$emit("hide")}}},[i("q-item-section",{attrs:{avatar:""}},[i("q-icon",{attrs:{name:"mdi-eye-off-outline"}})],1),i("q-item-section",[i("q-item-label",[e._v("Hide pannel")])],1)],1)],1)],1)],1)],1)],1),i("q-card-section",{directives:[{name:"autoscroll",rawName:"v-autoscroll",value:e.needAutoScroll,expression:"needAutoScroll"}],ref:"scroller",staticClass:"scroll q-pa-none",staticStyle:{height:"calc(100% - 50px)"},nativeOn:{scroll:function(t){return e.listScroll(t)}}},e._l(e.logs,(function(t,s){return i("q-card",{key:"log"+s,staticClass:"log__item q-ma-sm",class:["bg-"+e.getColor(t)+"-3"]},[i("div",{staticClass:"log__title q-py-xs q-px-sm text-bold"},[e._v("\n          "+e._s(t.type)+"\n        ")]),"offline"===t.type||"reconnect"===t.type||"end"===t.type?[i("div",{staticClass:"log__payload q-mr-xs q-ml-xs bg-grey-2",staticStyle:{"font-size":".75rem"}})]:"disconnect"===t.type?[t.data?i("div",{staticClass:"log__payload q-mr-xs q-ml-xs bg-grey-2",staticStyle:{"font-size":".75rem"}},[e._v("\n            disconnected by broker:\n            "),i("div",[e._v(e._s(t.data.reasonCode+": "+e.codes[t.data.reasonCode]))])]):e._e()]:"created"===t.type||"updated"===t.type?[i("div",{staticClass:"log__payload q-px-sm q-pt-xs q-mr-xs q-ml-xs bg-grey-2",staticStyle:{"font-size":".75rem"}},[i("div",{staticClass:"q-ma-none",staticStyle:{"white-space":"pre-wrap","word-break":"break-all"}},[i("json-tree",{attrs:{data:t.data}})],1)])]:"connect"===t.type?[e.codes[t.data.returnCode]||e.codes[t.data.reasonCode]?i("div",{staticClass:"log__payload q-px-sm q-py-xs q-mr-xs q-ml-xs bg-grey-2"},[e._v("\n            "+e._s(e.codes[t.data.returnCode]||e.codes[t.data.reasonCode])+"\n          ")]):e._e(),t.data.properties?i("div",{staticClass:"log__properties q-pt-xs q-mr-xs q-ml-xs text-grey-7 bg-green-1",staticStyle:{"font-size":".75rem","word-break":"break-all"}},[i("json-tree",{attrs:{data:t.data.properties}})],1):e._e()]:"error"===t.type?[i("div",{staticClass:"log__payload q-px-sm q-py-xs q-mr-xs q-ml-xs bg-grey-2",staticStyle:{"font-size":".75rem"}},[i("div",{staticClass:"q-ma-none",staticStyle:{"white-space":"pre-wrap","word-break":"break-all"}},[e._v(e._s(t.data.error.message))])])]:"subscribe"===t.type?[i("div",{staticClass:"log__payload q-pa-sm q-mr-xs q-ml-xs bg-grey-2 row",staticStyle:{"font-size":".75rem"}},[t.data.restored?e._e():i("div",{staticClass:"col-6 q-pr-xs"},[i("div",{staticClass:"text-bold"},[e._v("Request")]),i("div",{staticStyle:{"word-break":"break-all"}},[i("span",{staticClass:"text-bold"},[e._v("Topic: ")]),e._v(e._s(t.data.settings.topic))]),i("div",[i("span",{staticClass:"text-bold"},[e._v("QoS: ")]),e._v(e._s(t.data.settings.options.qos))]),void 0!==t.data.settings.options.nl?i("div",[i("span",{staticClass:"text-bold"},[e._v("No Local: ")]),e._v(e._s(t.data.settings.options.nl))]):e._e(),void 0!==t.data.settings.options.rap?i("div",[i("span",{staticClass:"text-bold"},[e._v("Retain as Published: ")]),e._v(e._s(t.data.settings.options.rap))]):e._e(),void 0!==t.data.settings.options.rh?i("div",[i("span",{staticClass:"text-bold"},[e._v("Retain handling: ")]),e._v(e._s(t.data.settings.options.rh))]):e._e()]),t.data.grants[0]&&0===(128&t.data.grants[0].qos)?i("div",{staticClass:"col-6 q-pl-xs"},[t.data.restored?i("div",{staticClass:"col-6 q-pr-xs text-bold"},[e._v("Access (restored by broker)")]):i("div",{staticClass:"col-6 q-pr-xs text-bold"},[e._v("Access")]),i("div",{staticStyle:{"word-break":"break-all"}},[i("span",{staticClass:"text-bold"},[e._v("Topic: ")]),e._v(e._s(t.data.grants[0].topic))]),i("div",[i("span",{staticClass:"text-bold"},[e._v("QoS: ")]),e._v(e._s(t.data.grants[0].qos))]),void 0!==t.data.grants[0].nl?i("div",[i("span",{staticClass:"text-bold"},[e._v("No Local: ")]),e._v(e._s(t.data.grants[0].nl))]):e._e(),void 0!==t.data.grants[0].rap?i("div",[i("span",{staticClass:"text-bold"},[e._v("Retain as Published: ")]),e._v(e._s(t.data.grants[0].rap))]):e._e(),void 0!==t.data.grants[0].rh?i("div",[i("span",{staticClass:"text-bold"},[e._v("Retain handling: ")]),e._v(e._s(t.data.grants[0].rh))]):e._e()]):e._e(),t.data.grants[0]&&(128&t.data.grants[0].qos)>0?i("div",[i("div",{staticClass:"col-6 q-pr-xs text-bold"},[e._v("Error")]),i("div",{staticStyle:{"word-break":"break-all"}},[i("span",{staticClass:"text-bold"},[e._v("Topic: ")]),e._v(e._s(t.data.grants[0].topic))]),i("div",{staticStyle:{"word-break":"break-all"}},[i("span",{staticClass:"text-bold"},[e._v("Message: ")]),e._v(e._s(e.codes[t.data.grants[0].qos]))])]):e._e()])]:"unsubscribe"===t.type?[i("div",{staticClass:"log__payload q-pa-sm q-mr-xs q-ml-xs bg-grey-2",staticStyle:{"font-size":".75rem"}},[i("div",{staticStyle:{"word-break":"break-all"}},[i("span",{staticClass:"text-bold"},[e._v("Topic: ")]),e._v(e._s(t.data.topic))]),i("div",[i("span",{staticClass:"text-bold"},[e._v("QoS: ")]),e._v(e._s(t.data.options.qos))]),void 0!==t.data.options.nl?i("div",[i("span",{staticClass:"text-bold"},[e._v("No Local: ")]),e._v(e._s(t.data.options.nl))]):e._e(),void 0!==t.data.options.rap?i("div",[i("span",{staticClass:"text-bold"},[e._v("Retain as Published: ")]),e._v(e._s(t.data.options.rap))]):e._e(),void 0!==t.data.options.rh?i("div",[i("span",{staticClass:"text-bold"},[e._v("Retain handling: ")]),e._v(e._s(t.data.options.rh))]):e._e()])]:[i("div",{staticClass:"log__payload q-pa-sm q-mr-xs q-ml-xs bg-grey-2",staticStyle:{"font-size":".75rem"}},[i("div",{staticStyle:{"white-space":"pre-wrap","word-break":"break-all"}},[e._v(e._s(t.data))])])],i("div",{staticClass:"log__timestamp q-py-xs q-px-sm text-grey-7"},[e._v(e._s(e.date.formatDate(t.timestamp,"DD/MM/YYYY HH:mm:ss")))])],2)})),1)],1)],1)},gt=[],vt={name:"Logs",props:["logs"],data:function(){return{needAutoScroll:!0,colors:{connect:"green",error:"red",offline:"grey",reconnect:"yellow",subscribe:"orange",unsubscribe:"purple",disconnect:"red",end:"grey",created:"green",updated:"yellow"},date:xe["a"],codes:{0:"",1:"Unacceptable protocol version",2:"Identifier rejected",3:"Server unavailable",4:"Bad username or password",5:"Not authorized",16:"No matching subscribers",17:"No subscription existed",128:"Unspecified error",129:"Malformed Packet",130:"Protocol Error",131:"Implementation specific error",132:"Unsupported Protocol Version",133:"Client Identifier not valid",134:"Bad User Name or Password",135:"Not authorized",136:"Server unavailable",137:"Server busy",138:"Banned",139:"Server shutting down",140:"Bad authentication method",141:"Keep Alive timeout",142:"Session taken over",143:"Topic Filter invalid",144:"Topic Name invalid",145:"Packet identifier in use",146:"Packet Identifier not found",147:"Receive Maximum exceeded",148:"Topic Alias invalid",149:"Packet too large",150:"Message rate too high",151:"Quota exceeded",152:"Administrative action",153:"Payload format invalid",154:"Retain not supported",155:"QoS not supported",156:"Use another server",157:"Server moved",158:"Shared Subscriptions not supported",159:"Connection rate exceeded",160:"Maximum connect time",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"}}},methods:{getColor:function(e){return"connect"===e.type&&(this.codes[e.data.returnCode]||this.codes[e.data.reasonCode])?"red":"subscribe"===e.type&&e.data.restored?"blue":"subscribe"===e.type&&e.data.grants&&(128&e.data.grants[0].qos)>0?"red":"disconnect"===e.type&&e.data?"brown":this.colors[e.type]},listScroll:function(e){var t=this.$refs.scroller.$el;t.scrollTop<t.scrollHeight-t.clientHeight?this.needAutoScroll=!1:this.needAutoScroll=!0},clearScrollParams:function(){this.currentScrollTop=0,this.allScrollTop=0,this.needAutoScroll=!0},clearLogsHandler:function(){this.$emit("clear")}},created:function(){var e=this;this.$nextTick((function(){if(e.needAutoScroll&&e.$refs.scroller){var t=e.$refs.scroller.$el;t.scrollTop=t.scrollHeight-t.clientHeight}}))},directives:{autoscroll:{inserted:function(e,t){var i=t.value;i&&(e.scrollTop=e.scrollHeight-e.clientHeight)},componentUpdated:function(e,t){var i=t.value;setTimeout((function(){i&&(e.scrollTop=e.scrollHeight-e.clientHeight)}),50)}}},components:{JsonTree:$e}},yt=vt,qt=(i("3b81"),Object(re["a"])(yt,ht,gt,!1,null,null,null)),xt=qt.exports,_t=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("q-dialog",{ref:"modal",attrs:{"content-class":"mqtt-board__popup",maximized:e.$q.platform.is.mobile},on:{show:function(t){return e.$emit("show")},hide:function(t){return e.$emit("hide")}}},[i("q-card",{style:{width:e.$q.platform.is.mobile?"100%":"50vw"}},[i("q-card-section",{staticClass:"q-pa-none"},[i("q-toolbar",{staticClass:"q-pr-none bg-indigo text-white"},[i("q-toolbar-title",[e._v("Publisher")]),i("q-btn",{attrs:{round:"",disable:!e.isValidPublisher,flat:"",icon:"mdi-send"},on:{click:function(t){e.$emit("publish",e.config),e.hide()}}},[i("q-tooltip",[e._v("Publish")])],1),i("q-btn",{attrs:{round:"",flat:"",icon:"mdi-close"},on:{click:e.hide}})],1)],1),i("q-separator"),i("q-card-section",{staticClass:"scroll q-pa-none",style:{height:e.$q.platform.is.mobile?"calc(100% - 50px)":"70vh"}},[i("div",{staticClass:"mqtt-client__publisher"},[i("div",{staticClass:"q-pa-md"},[i("q-input",{staticClass:"q-mb-xs",attrs:{"no-error-icon":"",color:"grey-9",autogrow:"",type:"aria",label:"Topic",error:e.validateSetting("topic"),"error-message":e.getValidateMessage("topic"),outlined:"","hide-bottom-space":""},model:{value:e.config.topic,callback:function(t){e.$set(e.config,"topic",t)},expression:"config.topic"}},[i("q-icon",{attrs:{slot:"after",name:"mdi-information-outline"},slot:"after"},[i("q-tooltip",[e._v(e._s(e.getDescription("topic")))])],1)],1),i("q-input",{staticClass:"q-mb-xs q-textarea--fix",attrs:{color:"grey-9",outlined:"","hide-bottom-space":"",autogrow:"",type:"textarea",label:"Message"},model:{value:e.config.payload,callback:function(t){e.$set(e.config,"payload",t)},expression:"config.payload"}},[i("q-icon",{attrs:{slot:"after",name:"mdi-information-outline"},slot:"after"},[i("q-tooltip",[e._v(e._s(e.getDescription("payload")))])],1)],1),i("q-expansion-item",{staticClass:"bg-grey-2",attrs:{value:!0,label:"Options"}},[i("div",[i("div",{staticClass:"q-mx-md",staticStyle:{"line-height":"34px"}},[i("div",{staticStyle:{width:"calc(100% - 36px)",display:"inline-flex"}},[e._v("\n                  QoS\n                  "),i("q-btn-toggle",{staticClass:"q-ml-sm",attrs:{flat:"",rounded:"","toggle-text-color":"grey-9","text-color":"grey-6",options:[{label:"0",value:0},{label:"1",value:1},{label:"2",value:2}]},model:{value:e.config.options.qos,callback:function(t){e.$set(e.config.options,"qos",t)},expression:"config.options.qos"}})],1),i("q-icon",{staticStyle:{"margin-left":"12px"},attrs:{slot:"after",size:"24px",color:"grey-7",name:"mdi-information-outline"},slot:"after"},[i("q-tooltip",[e._v(e._s(e.getDescription("options.qos")))])],1)],1),i("div",{staticClass:"q-mr-md q-ml-sm"},[i("q-checkbox",{staticStyle:{width:"calc(100% - 36px)"},attrs:{color:"grey-9",label:"Retain"},model:{value:e.config.options.retain,callback:function(t){e.$set(e.config.options,"retain",t)},expression:"config.options.retain"}}),i("q-icon",{staticStyle:{"margin-left":"12px"},attrs:{slot:"after",size:"24px",color:"grey-7",name:"mdi-information-outline"},slot:"after"},[i("q-tooltip",{attrs:{"max-width":"200px"}},[e._v(e._s(e.getDescription("options.retain")))])],1)],1),i("div",{staticClass:"q-mr-md q-ml-sm"},[i("q-checkbox",{staticStyle:{width:"calc(100% - 36px)"},attrs:{color:"grey-9",label:"Duplicate flag"},model:{value:e.config.options.dup,callback:function(t){e.$set(e.config.options,"dup",t)},expression:"config.options.dup"}}),i("q-icon",{staticStyle:{"margin-left":"12px"},attrs:{slot:"after",size:"24px",color:"grey-7",name:"mdi-information-outline"},slot:"after"},[i("q-tooltip",{attrs:{"max-width":"200px"}},[e._v(e._s(e.getDescription("options.dup")))])],1)],1),5===e.version?i("q-expansion-item",{staticClass:"q-mt-sm q-mb-sm bg-grey-4",attrs:{value:!0,label:"Properties"}},[i("div",{staticClass:"q-px-md q-pb-sm"},[i("div",[i("q-checkbox",{staticClass:"q-mt-sm q-mb-sm",staticStyle:{width:"calc(100% - 36px)"},attrs:{color:"grey-9",label:"Payload format indicator"},model:{value:e.config.options.properties.payloadFormatIndicator,callback:function(t){e.$set(e.config.options.properties,"payloadFormatIndicator",t)},expression:"config.options.properties.payloadFormatIndicator"}}),i("q-icon",{staticStyle:{"margin-left":"12px"},attrs:{slot:"after",size:"24px",color:"grey-7",name:"mdi-information-outline"},slot:"after"},[i("q-tooltip",[e._v(e._s(e.getDescription("options.properties.payloadFormatIndicator")))])],1)],1),i("q-input",{staticClass:"q-mb-xs",attrs:{color:"grey-9",type:"number",label:"Message expiry interval",outlined:"","hide-bottom-space":"",error:e.validateSetting("options.properties.messageExpiryInterval"),"error-message":e.getValidateMessage("options.properties.messageExpiryInterval"),"no-error-icon":""},on:{input:function(t){t||(e.config.options.properties.messageExpiryInterval=void 0)}},model:{value:e.config.options.properties.messageExpiryInterval,callback:function(t){e.$set(e.config.options.properties,"messageExpiryInterval",e._n(t))},expression:"config.options.properties.messageExpiryInterval"}},[i("q-icon",{attrs:{slot:"after",name:"mdi-information-outline"},slot:"after"},[i("q-tooltip",[e._v(e._s(e.getDescription("options.properties.messageExpiryInterval")))])],1)],1),i("q-input",{staticClass:"q-mb-xs",attrs:{color:"grey-9",type:"number",label:"Topic alias",outlined:"","hide-bottom-space":"",error:e.validateSetting("options.properties.topicAlias"),"error-message":e.getValidateMessage("options.properties.topicAlias"),"no-error-icon":""},on:{input:function(t){t||(e.config.options.properties.topicAlias=void 0)}},model:{value:e.config.options.properties.topicAlias,callback:function(t){e.$set(e.config.options.properties,"topicAlias",e._n(t))},expression:"config.options.properties.topicAlias"}},[i("q-icon",{attrs:{slot:"after",name:"mdi-information-outline"},slot:"after"},[i("q-tooltip",[e._v(e._s(e.getDescription("options.properties.topicAlias")))])],1)],1),i("q-input",{staticClass:"q-mb-xs",attrs:{color:"grey-9",label:"Response topic",outlined:"","hide-bottom-space":""},model:{value:e.config.options.properties.responseTopic,callback:function(t){e.$set(e.config.options.properties,"responseTopic",t)},expression:"config.options.properties.responseTopic"}},[i("q-icon",{attrs:{slot:"after",name:"mdi-information-outline"},slot:"after"},[i("q-tooltip",[e._v(e._s(e.getDescription("options.properties.responseTopic")))])],1)],1),i("q-input",{staticClass:"q-textarea--fix q-mb-xs",attrs:{color:"grey-9",outlined:"","hide-bottom-space":"",type:"textarea",autogrow:"",label:"Correlation data"},model:{value:e.config.options.properties.correlationData,callback:function(t){e.$set(e.config.options.properties,"correlationData",t)},expression:"config.options.properties.correlationData"}},[i("q-icon",{attrs:{slot:"after",name:"mdi-information-outline"},slot:"after"},[i("q-tooltip",{attrs:{"max-width":"200px"}},[e._v(e._s(e.getDescription("options.properties.correlationData")))])],1)],1),i("q-input",{staticClass:"q-mb-xs",attrs:{color:"grey-9",outlined:"","hide-bottom-space":"",label:"Content type"},model:{value:e.config.options.properties.contentType,callback:function(t){e.$set(e.config.options.properties,"contentType",t)},expression:"config.options.properties.contentType"}},[i("q-icon",{attrs:{slot:"after",name:"mdi-information-outline"},slot:"after"},[i("q-tooltip",[e._v(e._s(e.getDescription("options.properties.contentType")))])],1)],1),i("div",{staticClass:"q-mb-sm"},[i("div",{staticClass:"q-mt-md q-mb-sm"},[i("div",{staticStyle:{width:"calc(100% - 36px)",display:"inline-flex"}},[e._v("User Properties")]),i("q-icon",{staticStyle:{"margin-left":"12px"},attrs:{slot:"after",size:"24px",color:"grey-7",name:"mdi-information-outline"},slot:"after"},[i("q-tooltip",[e._v(e._s(e.getDescription("options.properties.userProperties")))])],1)],1),i("div",[e.config.options.properties.userProperties?i("q-list",{staticClass:"q-mb-xs"},e._l(e.config.options.properties.userProperties,(function(t,s){return i("q-item",{key:s+": "+t,staticStyle:{"min-height":"17px"}},[i("q-icon",{staticClass:"q-mr-sm cursor-pointer",attrs:{size:"1rem",name:"mdi-close-circle"},nativeOn:{click:function(t){return e.removePublishUserProperty(s)}}}),i("span",[e._v(e._s(s+": "+t))])],1)})),1):e._e(),i("q-input",{staticClass:"q-mb-xs",attrs:{color:"grey-9",outlined:"","hide-bottom-space":"",label:"User property name"},model:{value:e.publishUserProperty.name,callback:function(t){e.$set(e.publishUserProperty,"name",t)},expression:"publishUserProperty.name"}}),i("q-input",{staticClass:"q-mb-xs",attrs:{color:"grey-9",outlined:"","hide-bottom-space":"",label:"User property value"},model:{value:e.publishUserProperty.value,callback:function(t){e.$set(e.publishUserProperty,"value",t)},expression:"publishUserProperty.value"}}),i("q-btn",{staticClass:"q-mt-sm",staticStyle:{width:"100%"},attrs:{disable:!e.publishUserProperty.name||!e.publishUserProperty.value,color:"grey-9"},on:{click:function(t){return e.addPublishUserProperty()}}},[e._v("Add")])],1)])],1)]):e._e()],1)])],1)])])],1)],1)},St=[],wt={name:"PublisherModal",props:["message","version"],data:function(){return{declarations:De,config:{topic:this.message.topic,payload:JSON.stringify(this.message.payload),options:{qos:this.message.qos,retain:this.message.retain,dup:this.message.dup,properties:w()(this.message.properties)}},publishUserProperty:{value:"",name:""}}},computed:{validationModel:function(){return this.validatePublisher(this.config,!0)},isValidPublisher:function(){return!Object.keys(this.validationModel).length}},methods:{isNil:Ke.a,addPublishUserProperty:function(){this.config.options.properties.userProperties||this.$set(this.config.options.properties,"userProperties",{});var e=this.config.options.properties.userProperties;e[this.publishUserProperty.name]?Array.isArray(e[this.publishUserProperty.name])?e[this.publishUserProperty.name].push(this.publishUserProperty.value):this.$set(e,this.publishUserProperty.name,[e[this.publishUserProperty.name],this.publishUserProperty.value]):this.$set(e,this.publishUserProperty.name,this.publishUserProperty.value),this.publishUserProperty={value:"",name:""}},removePublishUserProperty:function(e){this.$delete(this.config.options.properties.userProperties,e),Object.keys(this.config.options.properties.userProperties).length||this.$set(this.config.options.properties,"userProperties",void 0)},show:function(){this.$refs.modal.show()},hide:function(){this.$refs.modal.hide()},validateSetting:function(e){return!!k()(this.validationModel,e,!1)},getValidateMessage:function(e){return k()(this.validationModel,e,"")},getDescription:function(e){return k()(this.declarations,"".concat(e,".desc"),"")}},mixins:[Qe]},Ct=wt,kt=(i("0a8d"),Object(re["a"])(Ct,_t,St,!1,null,null,null)),Pt=kt.exports,$t=function(){var e,t,i,s=this,r=s.$createElement,n=s._self._c||r;return n("q-dialog",{attrs:{"content-class":"mqtt-board__popup",maximized:s.$q.platform.is.mobile,"no-backdrop-dismiss":"","no-esc-dismiss":""},model:{value:s.model,callback:function(e){s.model=e},expression:"model"}},[n("q-card",{style:{minWidth:s.$q.platform.is.mobile?"100%":"50vw"}},[n("q-card-section",{staticClass:"q-pa-none",class:(e={},e["bg-"+s.color]=!0,e["text-white"]=!!s.color,e)},[n("q-toolbar",{class:(t={},t["bg-"+s.color]=!0,t["text-white"]=!!s.color,t)},[n("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",dense:"",icon:"keyboard_arrow_left"},on:{click:s.close}}),n("q-toolbar-title",[s._v("\n          Connection settings\n        ")])],1)],1),n("q-separator"),n("q-card-section",{staticClass:"scroll",style:{height:s.$q.platform.is.mobile?"calc(100% - 94px)":"50vh"}},[n("div",[n("q-input",{staticClass:"q-mb-xs",attrs:{color:"grey-9",outlined:"","no-error-icon":"",label:"Client name"},model:{value:s.currentSettings.clientName,callback:function(e){s.$set(s.currentSettings,"clientName",e)},expression:"currentSettings.clientName"}},[n("q-icon",{attrs:{slot:"after",name:"mdi-information-outline"},slot:"after"},[n("q-tooltip",[s._v(s._s(s.getDescription("clientName")))])],1)],1),n("q-input",{staticClass:"q-mb-xs",attrs:{color:"grey-9",outlined:"","no-error-icon":"",label:"Client ID",error:s.validateSetting("clientId"),"error-message":s.getValidateMessage("clientId"),"hide-bottom-space":""},model:{value:s.currentSettings.clientId,callback:function(e){s.$set(s.currentSettings,"clientId",e)},expression:"currentSettings.clientId"}},[n("q-btn",{attrs:{slot:"append",color:"grey-9",icon:"mdi-refresh",flat:"",round:""},on:{click:function(e){s.currentSettings.clientId="mqtt-board-"+Math.random().toString(16).substr(2,8)}},slot:"append"}),n("q-icon",{attrs:{slot:"after",name:"mdi-information-outline"},slot:"after"},[n("q-tooltip",[s._v(s._s(s.getDescription("clientId")))])],1)],1),n("q-input",{staticClass:"q-mb-xs",attrs:{color:"grey-9","no-error-icon":"",outlined:"",label:"Host",error:s.validateSetting("host"),"error-message":s.getValidateMessage("host"),"hide-bottom-space":""},model:{value:s.currentSettings.host,callback:function(e){s.$set(s.currentSettings,"host",e)},expression:"currentSettings.host"}},[n("q-icon",{attrs:{slot:"after",name:"mdi-information-outline"},slot:"after"},[n("q-tooltip",[s._v(s._s(s.getDescription("host")))])],1)],1),n("q-input",{staticClass:"q-mb-xs",attrs:{color:"grey-9","no-error-icon":"",outlined:"","hide-bottom-space":"",type:"number",label:"Keep alive",error:s.validateSetting("keepalive"),"error-message":s.getValidateMessage("keepalive")},model:{value:s.currentSettings.keepalive,callback:function(e){s.$set(s.currentSettings,"keepalive",s._n(e))},expression:"currentSettings.keepalive"}},[n("q-icon",{attrs:{slot:"after",name:"mdi-information-outline"},slot:"after"},[n("q-tooltip",{attrs:{"max-width":"200px"}},[s._v(s._s(s.getDescription("keepalive")))])],1)],1),n("q-select",{staticClass:"q-mb-xs",attrs:{color:"grey-9",outlined:"","popup-content-class":"mqtt-board__popup","map-options":"","emit-value":"",options:[{label:"3.1.1",value:4},{label:"5.0",value:5}],label:"Version of MQTT","hide-bottom-space":"","options-selected-class":"bg-grey-2 text-grey-9"},model:{value:s.currentSettings.protocolVersion,callback:function(e){s.$set(s.currentSettings,"protocolVersion",e)},expression:"currentSettings.protocolVersion"}},[n("q-icon",{attrs:{slot:"after",name:"mdi-information-outline"},slot:"after"},[n("q-tooltip",[s._v(s._s(s.getDescription("protocolVersion")))])],1)],1),n("div",[n("q-checkbox",{staticClass:"q-my-sm",staticStyle:{width:"calc(100% - 36px)"},attrs:{color:"grey-9",label:5===s.currentSettings.protocolVersion?"Clean start":"Clean session"},model:{value:s.currentSettings.clean,callback:function(e){s.$set(s.currentSettings,"clean",e)},expression:"currentSettings.clean"}}),n("q-icon",{staticStyle:{"margin-left":"12px"},attrs:{slot:"after",size:"24px",color:"grey-7",name:"mdi-information-outline"},slot:"after"},[n("q-tooltip",[s._v(s._s(s.getDescription("clean")))])],1)],1),n("q-input",{staticClass:"q-mb-xs",attrs:{color:"grey-9",outlined:"","hide-bottom-space":"",label:"Username"},model:{value:s.currentSettings.username,callback:function(e){s.$set(s.currentSettings,"username",e)},expression:"currentSettings.username"}},[-1!==s.currentSettings.host.indexOf("flespi")?n("q-btn",{attrs:{slot:"append",color:"grey-9",icon:"mdi-login",flat:"",round:""},on:{click:s.flespiLoginHandler},slot:"append"},[n("q-tooltip",[s._v("Get flespi token")])],1):s._e(),n("q-icon",{attrs:{slot:"after",name:"mdi-information-outline"},slot:"after"},[n("q-tooltip",[s._v(s._s(s.getDescription("username")))])],1)],1),n("q-input",{staticClass:"q-mb-xs",attrs:{color:"grey-9",outlined:"","hide-bottom-space":"",label:"Password"},model:{value:s.currentSettings.password,callback:function(e){s.$set(s.currentSettings,"password",e)},expression:"currentSettings.password"}},[n("q-icon",{attrs:{slot:"after",name:"mdi-information-outline"},slot:"after"},[n("q-tooltip",[s._v(s._s(s.getDescription("password")))])],1)],1),5===s.currentSettings.protocolVersion?n("q-expansion-item",{staticClass:"q-mt-sm q-mb-sm bg-grey-2",attrs:{label:"Properties"}},[n("div",{staticClass:"q-px-md q-py-sm"},[n("q-input",{staticClass:"q-mb-xs",attrs:{color:"grey-9",outlined:"","hide-bottom-space":"",type:"number",min:0,label:"Session expiry interval",error:s.validateSetting("properties.sessionExpiryInterval"),"error-message":s.getValidateMessage("properties.sessionExpiryInterval"),"no-error-icon":""},on:{input:function(e){e||(s.currentSettings.properties.sessionExpiryInterval=void 0)}},model:{value:s.currentSettings.properties.sessionExpiryInterval,callback:function(e){s.$set(s.currentSettings.properties,"sessionExpiryInterval",s._n(e))},expression:"currentSettings.properties.sessionExpiryInterval"}},[n("q-icon",{attrs:{slot:"after",name:"mdi-information-outline"},slot:"after"},[n("q-tooltip",[s._v(s._s(s.getDescription("properties.sessionExpiryInterval")))])],1)],1),n("q-input",{staticClass:"q-mb-xs",attrs:{color:"grey-9",type:"number",label:"Receive maximum",outlined:"","hide-bottom-space":"",error:s.validateSetting("properties.receiveMaximum"),"error-message":s.getValidateMessage("properties.receiveMaximum"),"no-error-icon":""},on:{input:function(e){e||(s.currentSettings.properties.receiveMaximum=void 0)}},model:{value:s.currentSettings.properties.receiveMaximum,callback:function(e){s.$set(s.currentSettings.properties,"receiveMaximum",s._n(e))},expression:"currentSettings.properties.receiveMaximum"}},[n("q-icon",{attrs:{slot:"after",name:"mdi-information-outline"},slot:"after"},[n("q-tooltip",[s._v(s._s(s.getDescription("properties.receiveMaximum")))])],1)],1),n("q-input",{staticClass:"q-mb-xs",attrs:{color:"grey-9",type:"number",label:"Maximum packet size",outlined:"","hide-bottom-space":"",error:s.validateSetting("properties.maximumPacketSize"),"error-message":s.getValidateMessage("properties.maximumPacketSize"),"no-error-icon":""},on:{input:function(e){e||(s.currentSettings.properties.maximumPacketSize=void 0)}},model:{value:s.currentSettings.properties.maximumPacketSize,callback:function(e){s.$set(s.currentSettings.properties,"maximumPacketSize",s._n(e))},expression:"currentSettings.properties.maximumPacketSize"}},[n("q-icon",{attrs:{slot:"after",name:"mdi-information-outline"},slot:"after"},[n("q-tooltip",[s._v(s._s(s.getDescription("properties.maximumPacketSize")))])],1)],1),n("q-input",{staticClass:"q-mb-xs",attrs:{color:"grey-9",type:"number",label:"Topic alias maximum",outlined:"","hide-bottom-space":"",error:s.validateSetting("properties.topicAliasMaximum"),"error-message":s.getValidateMessage("properties.topicAliasMaximum"),"no-error-icon":""},on:{input:function(e){e||(s.currentSettings.properties.topicAliasMaximum=void 0)}},model:{value:s.currentSettings.properties.topicAliasMaximum,callback:function(e){s.$set(s.currentSettings.properties,"topicAliasMaximum",s._n(e))},expression:"currentSettings.properties.topicAliasMaximum"}},[n("q-icon",{attrs:{slot:"after",name:"mdi-information-outline"},slot:"after"},[n("q-tooltip",[s._v(s._s(s.getDescription("properties.topicAliasMaximum")))])],1)],1),n("div",[n("q-checkbox",{staticStyle:{width:"calc(100% - 36px)"},attrs:{color:"grey-9",label:"Request-Response information"},model:{value:s.currentSettings.properties.requestResponseInformation,callback:function(e){s.$set(s.currentSettings.properties,"requestResponseInformation",e)},expression:"currentSettings.properties.requestResponseInformation"}}),n("q-icon",{staticStyle:{"margin-left":"12px"},attrs:{slot:"after",size:"24px",color:"grey-7",name:"mdi-information-outline"},slot:"after"},[n("q-tooltip",[s._v(s._s(s.getDescription("properties.requestResponseInformation")))])],1)],1),n("div",[n("q-checkbox",{staticStyle:{width:"calc(100% - 36px)"},attrs:{color:"grey-9",label:"Request problem information"},model:{value:s.currentSettings.properties.requestProblemInformation,callback:function(e){s.$set(s.currentSettings.properties,"requestProblemInformation",e)},expression:"currentSettings.properties.requestProblemInformation"}}),n("q-icon",{staticStyle:{"margin-left":"12px"},attrs:{slot:"after",size:"24px",color:"grey-7",name:"mdi-information-outline"},slot:"after"},[n("q-tooltip",{attrs:{"max-width":"200px"}},[s._v(s._s(s.getDescription("properties.requestProblemInformation")))])],1)],1),n("div",{staticClass:"q-mb-sm"},[n("div",{staticClass:"q-mt-md q-mb-sm"},[n("div",{staticStyle:{width:"calc(100% - 36px)",display:"inline-flex"}},[s._v("User Properties")]),n("q-icon",{staticStyle:{"margin-left":"12px"},attrs:{slot:"after",size:"24px",color:"grey-7",name:"mdi-information-outline"},slot:"after"},[n("q-tooltip",[s._v(s._s(s.getDescription("properties.userProperties")))])],1)],1),n("div",[s.currentSettings.properties.userProperties?n("q-list",{staticClass:"q-mb-xs",attrs:{bordered:""}},s._l(s.currentSettings.properties.userProperties,(function(e,t){return n("q-item",{key:t+": "+e,staticStyle:{"min-height":"17px"}},[n("q-icon",{staticClass:"q-mr-sm cursor-pointer",attrs:{size:"1.2rem",name:"mdi-close-circle"},nativeOn:{click:function(e){return s.removeConnectUserProperty(t)}}}),n("span",[s._v(s._s(t+": "+e))])],1)})),1):s._e(),n("q-input",{staticClass:"q-mb-xs",attrs:{color:"grey-9",label:"User property name",outlined:"","hide-bottom-space":""},model:{value:s.connectUserProperty.name,callback:function(e){s.$set(s.connectUserProperty,"name",e)},expression:"connectUserProperty.name"}}),n("q-input",{staticClass:"q-mb-xs",attrs:{color:"grey-9",label:"User property value",outlined:"","hide-bottom-space":""},model:{value:s.connectUserProperty.value,callback:function(e){s.$set(s.connectUserProperty,"value",e)},expression:"connectUserProperty.value"}}),n("q-btn",{staticClass:"q-mt-sm",staticStyle:{width:"100%"},attrs:{color:"grey-9"},on:{click:s.addUserProperty}},[s._v("Add")])],1)]),n("q-input",{staticClass:"q-mb-xs",attrs:{color:"grey-9",label:"Authentication method",outlined:"","hide-bottom-space":""},model:{value:s.currentSettings.properties.authenticationMethod,callback:function(e){s.$set(s.currentSettings.properties,"authenticationMethod",e)},expression:"currentSettings.properties.authenticationMethod"}},[n("q-icon",{attrs:{slot:"after",name:"mdi-information-outline"},slot:"after"},[n("q-tooltip",[s._v(s._s(s.getDescription("properties.authenticationMethod")))])],1)],1),n("q-input",{staticClass:"q-mb-xs q-textarea--fix",attrs:{color:"grey-9",type:"textarea",label:"Authentication data",outlined:"","hide-bottom-space":"",autogrow:""},model:{value:s.currentSettings.properties.authenticationData,callback:function(e){s.$set(s.currentSettings.properties,"authenticationData",e)},expression:"currentSettings.properties.authenticationData"}},[n("q-icon",{attrs:{slot:"after",name:"mdi-information-outline"},slot:"after"},[n("q-tooltip",[s._v(s._s(s.getDescription("properties.authenticationData")))])],1)],1)],1)]):s._e(),n("q-expansion-item",{staticClass:"q-mt-sm q-mb-sm bg-grey-2",attrs:{label:"Will"}},[n("div",{staticClass:"q-px-md q-pb-sm"},[n("q-input",{staticClass:"q-mb-xs",attrs:{color:"grey-9","no-error-icon":"",error:s.validateSetting("will.topic"),"error-message":s.getValidateMessage("will.topic"),label:"Will topic",outlined:"","hide-bottom-space":""},model:{value:s.currentSettings.will.topic,callback:function(e){s.$set(s.currentSettings.will,"topic",e)},expression:"currentSettings.will.topic"}},[n("q-icon",{attrs:{slot:"after",name:"mdi-information-outline"},slot:"after"},[n("q-tooltip",[s._v(s._s(s.getDescription("will.topic")))])],1)],1),n("q-input",{staticClass:"q-mb-xs q-textarea--fix",attrs:{color:"grey-9","no-error-icon":"",error:s.validateSetting("will.payload"),"error-message":s.getValidateMessage("will.payload"),type:"textarea",label:"Will payload",outlined:"","hide-bottom-space":"",autogrow:""},model:{value:s.currentSettings.will.payload,callback:function(e){s.$set(s.currentSettings.will,"payload",e)},expression:"currentSettings.will.payload"}},[n("q-icon",{attrs:{slot:"after",name:"mdi-information-outline"},slot:"after"},[n("q-tooltip",[s._v(s._s(s.getDescription("will.payload")))])],1)],1),n("div",{staticClass:"q-ml-xs",staticStyle:{"line-height":"48px"}},[n("div",{staticStyle:{width:"calc(100% - 36px)",display:"inline-flex"}},[s._v("\n                QoS\n                "),n("q-btn-toggle",{staticClass:"q-ml-sm",attrs:{flat:"",rounded:"","toggle-text-color":"grey-9","text-color":"grey-6",options:[{label:"0",value:0},{label:"1",value:1},{label:"2",value:2}]},model:{value:s.currentSettings.will.qos,callback:function(e){s.$set(s.currentSettings.will,"qos",e)},expression:"currentSettings.will.qos"}})],1),n("q-icon",{staticStyle:{"margin-left":"12px"},attrs:{slot:"after",size:"24px",color:"grey-7",name:"mdi-information-outline"},slot:"after"},[n("q-tooltip",[s._v(s._s(s.getDescription("will.qos")))])],1)],1),n("div",[n("q-checkbox",{staticStyle:{width:"calc(100% - 36px)"},attrs:{color:"grey-9",label:"Will retain"},model:{value:s.currentSettings.will.retain,callback:function(e){s.$set(s.currentSettings.will,"retain",e)},expression:"currentSettings.will.retain"}}),n("q-icon",{staticStyle:{"margin-left":"12px"},attrs:{slot:"after",size:"24px",color:"grey-7",name:"mdi-information-outline"},slot:"after"},[n("q-tooltip",[s._v(s._s(s.getDescription("will.retain")))])],1)],1),5===s.currentSettings.protocolVersion?n("q-expansion-item",{staticClass:"bg-grey-4",attrs:{label:"Will properties"}},[n("div",{staticClass:"q-px-md q-py-sm"},[n("q-input",{staticClass:"q-mb-xs",attrs:{color:"grey-9",outlined:"","hide-bottom-space":"",type:"number",label:"Will delay interval",error:s.validateSetting("will.properties.willDelayInterval"),"error-message":s.getValidateMessage("will.properties.willDelayInterval"),"no-error-icon":""},on:{input:function(e){e||(s.currentSettings.will.properties.willDelayInterval=void 0)}},model:{value:s.currentSettings.will.properties.willDelayInterval,callback:function(e){s.$set(s.currentSettings.will.properties,"willDelayInterval",s._n(e))},expression:"currentSettings.will.properties.willDelayInterval"}},[n("q-icon",{attrs:{slot:"after",name:"mdi-information-outline"},slot:"after"},[n("q-tooltip",[s._v(s._s(s.getDescription("will.properties.willDelayInterval")))])],1)],1),n("div",[n("q-checkbox",{staticClass:"q-mt-sm q-mb-sm",staticStyle:{width:"calc(100% - 36px)"},attrs:{color:"grey-9",label:"Payload format indicator"},model:{value:s.currentSettings.will.properties.payloadFormatIndicator,callback:function(e){s.$set(s.currentSettings.will.properties,"payloadFormatIndicator",e)},expression:"currentSettings.will.properties.payloadFormatIndicator"}}),n("q-icon",{staticStyle:{"margin-left":"12px"},attrs:{slot:"after",size:"24px",color:"grey-7",name:"mdi-information-outline"},slot:"after"},[n("q-tooltip",[s._v(s._s(s.getDescription("will.properties.payloadFormatIndicator")))])],1)],1),n("q-input",{staticClass:"q-mb-xs",attrs:{color:"grey-9",type:"number",label:"Message expiry interval",outlined:"","hide-bottom-space":"",error:s.validateSetting("will.properties.messageExpiryInterval"),"error-message":s.getValidateMessage("will.properties.messageExpiryInterval"),"no-error-icon":""},on:{input:function(e){e||(s.currentSettings.will.properties.messageExpiryInterval=void 0)}},model:{value:s.currentSettings.will.properties.messageExpiryInterval,callback:function(e){s.$set(s.currentSettings.will.properties,"messageExpiryInterval",s._n(e))},expression:"currentSettings.will.properties.messageExpiryInterval"}},[n("q-icon",{attrs:{slot:"after",name:"mdi-information-outline"},slot:"after"},[n("q-tooltip",[s._v(s._s(s.getDescription("will.properties.messageExpiryInterval")))])],1)],1),n("q-input",{staticClass:"q-mb-xs",attrs:{color:"grey-9",label:"Content type",outlined:"","hide-bottom-space":""},model:{value:s.currentSettings.will.properties.contentType,callback:function(e){s.$set(s.currentSettings.will.properties,"contentType",e)},expression:"currentSettings.will.properties.contentType"}},[n("q-icon",{attrs:{slot:"after",name:"mdi-information-outline"},slot:"after"},[n("q-tooltip",[s._v(s._s(s.getDescription("will.properties.contentType")))])],1)],1),n("q-input",{staticClass:"q-mb-xs",attrs:{color:"grey-9",label:"Response topic",outlined:"","hide-bottom-space":""},model:{value:s.currentSettings.will.properties.responseTopic,callback:function(e){s.$set(s.currentSettings.will.properties,"responseTopic",e)},expression:"currentSettings.will.properties.responseTopic"}},[n("q-icon",{attrs:{slot:"after",name:"mdi-information-outline"},slot:"after"},[n("q-tooltip",[s._v(s._s(s.getDescription("will.properties.responseTopic")))])],1)],1),n("q-input",{staticClass:"q-mb-xs q-textarea--fix",attrs:{color:"grey-9",type:"textarea",label:"Correlation data",outlined:"","hide-bottom-space":"",autogrow:""},model:{value:s.currentSettings.will.properties.correlationData,callback:function(e){s.$set(s.currentSettings.will.properties,"correlationData",e)},expression:"currentSettings.will.properties.correlationData"}},[n("q-icon",{attrs:{slot:"after",name:"mdi-information-outline"},slot:"after"},[n("q-tooltip",{attrs:{"max-width":"200px"}},[s._v(s._s(s.getDescription("will.properties.correlationData")))])],1)],1),n("div",[n("div",{staticClass:"q-mt-md q-mb-sm"},[n("div",{staticStyle:{width:"calc(100% - 36px)",display:"inline-flex"}},[s._v("Will user properties")]),n("q-icon",{staticStyle:{"margin-left":"12px"},attrs:{slot:"after",size:"24px",color:"grey-7",name:"mdi-information-outline"},slot:"after"},[n("q-tooltip",[s._v(s._s(s.getDescription("will.properties.userProperties")))])],1)],1),n("div",[s.currentSettings.will.properties.userProperties?n("q-list",{staticClass:"q-mb-xs",staticStyle:{"border-color":"#b7b7b7"}},s._l(s.currentSettings.will.properties.userProperties,(function(e,t){return n("q-item",{key:t+": "+e,staticStyle:{"min-height":"17px"}},[n("q-icon",{staticClass:"q-mr-sm cursor-pointer",attrs:{size:"1.2rem",name:"mdi-close-circle"},nativeOn:{click:function(e){return s.removeWillConnectUserProperty(t)}}}),n("span",[s._v(s._s(t+": "+e))])],1)})),1):s._e(),n("q-input",{staticClass:"q-mb-xs",attrs:{color:"grey-9",label:"Will user property name",outlined:"","hide-bottom-space":""},model:{value:s.willConnectUserProperty.name,callback:function(e){s.$set(s.willConnectUserProperty,"name",e)},expression:"willConnectUserProperty.name"}}),n("q-input",{staticClass:"q-mb-xs",attrs:{color:"grey-9",label:"Will user property value",outlined:"","hide-bottom-space":""},model:{value:s.willConnectUserProperty.value,callback:function(e){s.$set(s.willConnectUserProperty,"value",e)},expression:"willConnectUserProperty.value"}}),n("q-btn",{staticClass:"q-mt-sm",staticStyle:{width:"100%"},attrs:{color:"grey-9"},on:{click:s.addWillUserProperty}},[s._v("Add")])],1)])],1)]):s._e()],1)])],1)]),n("q-separator"),n("q-card-actions",{class:(i={},i["bg-"+s.color]=!0,i["text-white"]=!!s.color,i),attrs:{align:"right"}},[n("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-mr-sm",attrs:{flat:"",dense:""},on:{click:s.close}},[s._v("Close")]),n("q-btn",{attrs:{flat:"",dense:"",disable:!s.isCurrentSettingsValid},on:{click:s.save}},[s._v("Save")])],1)],1)],1)},Mt=[],Ot=i("d0b1"),It={props:{initSettings:{type:Object,default:function(){return{}}},settings:{type:Object,default:function(){return{}}},color:String,secure:Boolean},mixins:[Qe],data:function(){return{model:!0,declarations:Ue,currentSettings:w()(_()({},Ot["b"],this.initSettings,this.settings)),connectUserProperty:{value:"",name:""},willConnectUserProperty:{value:"",name:""}}},computed:{validationModel:function(){return this.validateSettings(this.currentSettings,!0)},isCurrentSettingsValid:function(){return!Object.keys(this.validationModel).length}},methods:{isNil:Ke.a,close:function(){this.$emit("close")},save:function(){this.$emit("save",this.currentSettings),this.close()},addUserProperty:function(){this.currentSettings.properties.userProperties||(this.currentSettings.properties.userProperties={}),this.currentSettings.properties.userProperties[this.connectUserProperty.name]=this.connectUserProperty.value,this.connectUserProperty={value:"",name:""}},addWillUserProperty:function(){this.currentSettings.will.properties.userProperties||(this.currentSettings.will.properties.userProperties={}),this.currentSettings.will.properties.userProperties[this.willConnectUserProperty.name]=this.willConnectUserProperty.value,this.willConnectUserProperty={value:"",name:""}},removeConnectUserProperty:function(e){this.$delete(this.currentSettings.properties.userProperties,e),Object.keys(this.currentSettings.properties.userProperties).length||(this.currentSettings.properties.userProperties=void 0)},removeWillConnectUserProperty:function(e){this.$delete(this.currentSettings.will.properties.userProperties,e),Object.keys(this.currentSettings.will.properties.userProperties).length||(this.currentSettings.will.properties.userProperties=void 0)},openWindow:function(e,t){t=t||"auth";var i=500,s=600,r=void 0!==window.screenLeft?window.screenLeft:screen.left,n=void 0!==window.screenTop?window.screenTop:screen.top,o=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width,a=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height,l=o/2-i/2+r,c=a/2-s/2+n,p=window.open(e,t,"toolbar=no,location=no,status=yes,resizable=yes,scrollbars=yes, width="+i+", height="+s+", top="+c+", left="+l);window.focus&&p.focus()},flespiLoginHandler:function(){var e=this,t=function t(i){if("string"===typeof i.data&&~i.data.indexOf("FlespiLogin|token:")){var s=i.data;s=s.replace("FlespiLogin|token:",""),s=JSON.parse(s),e.currentSettings.username=s.token,e.currentSettings.host="wss://".concat(s.region["mqtt-ws"]),window.removeEventListener("message",t)}};window.addEventListener("message",t),this.openWindow("https://flespi.io/login/#/providers")},validateSetting:function(e){return!!k()(this.validationModel,e,!1)},getValidateMessage:function(e){return k()(this.validationModel,e,"")},getDescription:function(e){return k()(this.declarations,"".concat(e,".desc"),"")}}},Tt=It,Ut=Object(re["a"])(Tt,$t,Mt,!1,null,null,null),jt=Ut.exports,Dt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"wrapper__footer row no-wrap items-center justify-between bg-grey-9"},[i("q-resize-observer",{on:{resize:function(t){var i=t.width;return e.wrapperWidth=i}}}),i("div",[e.needScrollButtons?i("q-btn",{attrs:{disable:e.buttonsDisable.prev,color:"white",icon:"mdi-chevron-left",dense:"",flat:"",size:"21px"},on:{click:function(t){return e.$emit("swipe","right")}}},[i("q-tooltip",[e._v("Previous pannel")])],1):e._e()],1),i("div",{staticClass:"flex relative-position"},[e.needShowMore[0]?i("q-btn",{staticClass:"wrapper__left-more",attrs:{color:"white",icon:"mdi-dots-horizontal",dense:"",flat:"",size:"10px"},on:{click:function(t){return e.$emit("swipe-to",0)}}},[i("q-tooltip",[e._v("Go to first pannel")])],1):e._e(),e._l(e.shownItems,(function(t){return i("div",{key:t.queue,staticClass:"q-py-xs row inline",class:e.getItemClasses(t.queue),on:{click:function(i){return e.$emit("swipe-to",t.queue)}}},[i("q-btn",{staticClass:"q-mx-xs",attrs:{round:"",size:"4px",color:e.colors[t.type],unelevated:""}},[i("q-tooltip",{attrs:{"content-class":["bg-"+e.colors[t.type]],"max-width":"250px"}},[i("div",[i("div",{staticClass:"text-bold"},[e._v(e._s(t.type.toUpperCase()))]),t.config&&t.config.topic?i("div",{staticClass:"ellipsis"},[e._v("Topic: "+e._s(t.config.topic))]):e._e(),t.config&&t.config.payload?i("div",{staticClass:"ellipsis"},[e._v("Payload: "+e._s(t.config.payload))]):e._e()])])],1)],1)})),e.needShowMore[1]?i("q-btn",{staticClass:"wrapper__right-more",attrs:{color:"white",icon:"mdi-dots-horizontal",dense:"",flat:"",size:"10px"},on:{click:function(t){return e.$emit("swipe-to",e.entities.length-1)}}},[i("q-tooltip",[e._v("Go to last pannel")])],1):e._e()],2),i("div",[e.needScrollButtons?i("q-btn",{attrs:{disable:e.buttonsDisable.next,color:"white",icon:"mdi-chevron-right",dense:"",flat:"",size:"21px"},on:{click:function(t){return e.$emit("swipe","left")}}},[i("q-tooltip",[e._v("Next pannel")])],1):e._e()],1)],1)},Et=[];function At(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function Nt(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?At(Object(i),!0).forEach((function(t){d()(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):At(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var Ht={props:{entities:Array,buttonsDisable:Object,active:Array},data:function(){return{colors:{logs:"blue",subscriber:"orange",publisher:"indigo",unresolved:"red-6"},wrapperWidth:0}},computed:{viewedItemsCount:function(){return Math.floor((this.wrapperWidth-96)/20)},visibleItemsRange:function(){var e=Math.floor((this.viewedItemsCount-(this.active[1]-this.active[0]+1))/2),t=0,i=this.entities.length-1,s=2*e+(this.active[1]-this.active[0]+1),r=this.active[0]-e<0?0:this.active[0]-e,n=this.active[1]+e>i?i:this.active[1]+e;return r===t&&(n=s-1),n===i&&(r=i-s+1),[r,n]},shownItems:function(){var e=this;return this.entities.reduce((function(t,i,s){return e.visibleItemsRange[0]<=s&&e.visibleItemsRange[1]>=s&&t.push(Nt({queue:s},i)),t}),[])},needScrollButtons:function(){return this.shownItems.length<this.entities.length},needShowMore:function(){var e=[!1,!1];return this.visibleItemsRange[0]>0&&(e[0]=!0),this.visibleItemsRange[1]<this.entities.length-1&&(e[1]=!0),e}},methods:{getItemClasses:function(e){var t=[];return this.active[0]<=e&&this.active[1]>=e&&t.push("item--active"),this.active[1]===e&&this.active[0]===e?t.push("item--active-all"):this.active[0]===e?t.push("item--active-left"):this.active[1]===e&&t.push("item--active-right"),t}}},zt=Ht,Lt=(i("b2fe"),Object(re["a"])(zt,Dt,Et,!1,null,null,null)),Rt=Lt.exports,Vt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("q-list",[i("q-item-label",{attrs:{header:""}},[e._v("Panes")]),i("div",{staticClass:"scroll absolute full-width",staticStyle:{height:"calc(100% - 48px)"}},e._l(e.visibleItems,(function(t,s){return i("q-item",{key:t.type+"-"+t.id,staticClass:"q-ma-xs rounded-borders",class:e.getItemClasses(t),staticStyle:{overflow:"hidden"},attrs:{active:t.rendered,clickable:""},on:{click:function(t){return e.$emit("pick",s)}}},[i("div",{staticClass:"absolute-top-left absolute-bottom-left",class:["bg-"+e.colorByType[t.type]+"-6"],staticStyle:{width:"10px"}}),i("q-item-section",[i("q-item-label",{staticClass:"q-pa-none text-bold",class:["text-"+(t.rendered?"white":e.colorByType[t.type]+"-10")],attrs:{header:""}},[e._v(e._s(e.labelByType[t.type]))]),"subscriber"===t.type||"publisher"===t.type?i("q-item-label",{staticClass:"ellipsis",class:["text-"+(t.rendered?"grey-2":e.colorByType[t.type]+"-10")],attrs:{caption:""}},[e._v(e._s(t.settings.topic))]):e._e(),"publisher"===t.type?i("q-item-label",{staticClass:"ellipsis",class:["text-"+(t.rendered?"grey-2":e.colorByType[t.type]+"-10")],attrs:{caption:""}},[i("small",[e._v(e._s(t.settings.payload))])]):e._e()],1),"subscriber"===t.type||"publisher"===t.type?i("q-item-section",{attrs:{side:""}},["publisher"===t.type?i("q-btn",{attrs:{dense:"",outline:"",color:"white",disable:!e.isValidPublisher(t.settings),icon:"mdi-send"},on:{click:function(i){return i.stopPropagation(),e.$emit("publish",t.settings)}}},[i("q-tooltip",[e._v("Publish")])],1):e._e(),"subscriber"===t.type?i("q-btn",{attrs:{dense:"",outline:"",color:"white",disable:!e.isValidSubscriber(t.settings),icon:t.status?"mdi-stop":"mdi-play"},on:{click:function(i){return i.stopPropagation(),e.$emit(t.status?"subscriber:stop":"subscriber:play",t.index)}}},[i("q-tooltip",[e._v(e._s(t.status?"Stop":"Subscribe"))])],1):e._e()],1):e._e()],1)})),1)],1)},Ft=[];function Bt(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function Wt(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?Bt(Object(i),!0).forEach((function(t){d()(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Bt(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var Jt={props:["entities","active"],data:function(){return{colorByType:{subscriber:"orange",publisher:"indigo",logs:"blue",unresolved:"red"},labelByType:{subscriber:"Subscriber",publisher:"Publisher",logs:"Logs",unresolved:"Unresolved"}}},computed:{visibleItems:function(){var e=0;return this.entities.reduce((function(t,i){var s=Wt({},i);return i.rendered&&(s.visibleIndex=e,e++),t.push(s),t}),[])}},methods:{isValidPublisher:function(e){return!Object.keys(this.validatePublisher(e,!0)).length},isValidSubscriber:function(e){return!Object.keys(this.validateSubscriber(e,!0)).length},getItemClasses:function(e){var t=["bg-".concat(e.rendered?"".concat(this.colorByType[e.type],"-6"):"grey-13")];return(this.active[0]>e.visibleIndex||this.active[1]<e.visibleIndex||void 0===e.visibleIndex)&&t.push("q-ml-md"),t}},mixins:[Qe]},Xt=Jt,Qt=Object(re["a"])(Xt,Vt,Ft,!1,null,null,null),Yt=Qt.exports,Kt=i("2b0e");function Gt(e,t,i){function s(e,i,s){var r=e.split("/"),n=s,o="";r.forEach((function(e,s,r){if(n[e]||Kt["default"].set(n,e,{children:void 0,topic:"",value:void 0}),0!==s&&(o+="/"),o+="".concat(e),Kt["default"].set(n[e],"topic",o),s!==r.length-1)n[e].children||Kt["default"].set(n[e],"children",{}),n=n[e].children;else{n[e].value||Kt["default"].set(n[e],"value",{});var a=i.properties&&i.properties.userProperties&&i.properties.userProperties[t]?i.properties.userProperties[t]:"";Kt["default"].set(n[e].value,a,JSON.stringify(i))}}))}function r(e,i,s){function r(e,t){var i=new Array(t.length).fill(void 0);return i[0]=e,t.reduce((function(e,t,s,r){var n={container:i[s]||null,name:t};return i[s+1]=n.container&&n.container[t]?n.container[t].children:null,n}),{container:e,name:t[0]})}var n=e.split("/");new Array(n.length).fill("").forEach((function(e,o){var a=n.length-o,l=n.slice(0,a),c=r(s,l);if(!c.container||!c.container[c.name])return!1;var p=c.container[c.name],u=p.children&&!!Object.keys(p.children).length;if(p.value&&0===o){var d=i.properties&&i.properties.userProperties&&i.properties.userProperties[t]?i.properties.userProperties[t]:"";Kt["default"].delete(p.value,d),Object.keys(p.value).length||Kt["default"].set(p,"value",void 0)}u||(Kt["default"].set(p,"children",void 0),p.value||Kt["default"].delete(c.container,c.name))}))}function n(e){return"string"!==typeof e.payload||e.payload.length?s:r}Array.isArray(e)?e.forEach((function(e){n(e)(e.topic,e,i)})):n(e)(e.topic,e,i)}var Zt=Gt,ei=i("70e1"),ti=i.n(ei);function ii(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function si(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?ii(Object(i),!0).forEach((function(t){d()(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):ii(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var ri=function(){function e(t){f()(this,e),this.bus=new ti.a(t)}return h()(e,[{key:"getDevices",value:function(){var e=p()(l.a.mark((function e(t){var i,s,r,n,o,a,c;return l.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(i="all",!t||"all"===t){e.next=15;break}return s=t.join(","),e.prev=3,e.next=6,this.bus.gw.getCalcsDevices(s,"all",{fileds:"device_id"});case 6:r=e.sent,n=k()(r,"data.result",[]),o=n.reduce((function(e,t){return e[t.device_id]=!0,e}),{}),i=Object.keys(o).join(","),e.next=15;break;case 12:return e.prev=12,e.t0=e["catch"](3),e.abrupt("return",[]);case 15:return e.next=17,this.bus.gw.getDevices(i,{fields:"id,name"});case 17:return a=e.sent,c=k()(a,"data.result",[]),c=c.map((function(e){return{label:e.name||"#".concat(e.id),value:"".concat(e.id)}})),e.abrupt("return",c);case 21:case"end":return e.stop()}}),e,this,[[3,12]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getChannels",value:function(){var e=p()(l.a.mark((function e(){var t,i;return l.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.bus.gw.getChannels("all",{fileds:"id,name"});case 2:return t=e.sent,i=k()(t,"data.result",[]),i=i.map((function(e){return{label:e.name||"#".concat(e.id),value:"".concat(e.id)}})),e.abrupt("return",i);case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getCalcs",value:function(){var e=p()(l.a.mark((function e(t){var i,s,r,n,o,a,c;return l.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(i="all",!t||"all"===t){e.next=15;break}return e.prev=2,s=t.join(","),e.next=6,this.bus.gw.getCalcsDevices("all",s,{fields:"calc_id"});case 6:r=e.sent,n=k()(r,"data.result",[]),o=n.reduce((function(e,t){return e[t.calc_id]=!0,e}),{}),i=Object.keys(o).join(","),e.next=15;break;case 12:return e.prev=12,e.t0=e["catch"](2),e.abrupt("return",[]);case 15:return e.next=17,this.bus.gw.getCalcs(i,{fileds:"id,name"});case 17:return a=e.sent,c=k()(a,"data.result",[]),c=c.map((function(e){return{label:e.name||"#".concat(e.id),value:"".concat(e.id)}})),e.abrupt("return",c);case 21:case"end":return e.stop()}}),e,this,[[2,12]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getDevicesTelemetry",value:function(){var e=p()(l.a.mark((function e(t){var i,s;return l.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.bus.gw.getDevicesTelemetry(t,"all");case 2:return i=e.sent,s=k()(i,"data.result",[]),s=s.reduce((function(e,t){var i=t.telemetry;return i&&(e=si(si({},e),i)),e}),{}),s=Object.keys(s).sort().map((function(e){return{label:e,value:e}})),e.abrupt("return",s);case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getDevicesSettings",value:function(){var e=p()(l.a.mark((function e(t){var i,s;return l.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.bus.gw.getDevicesSettings(t,"all",{fields:"name,schema"});case 2:return i=e.sent,s=k()(i,"data.result",[]),s=s.reduce((function(e,t){var i=t.name,s=t.schema.title;return e[i]||(e[i]={}),e[i][s]=!0,e}),{}),s=Object.keys(s).map((function(e){return{label:Object.keys(s[e]).join(", "),value:e}})),e.abrupt("return",s);case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"settings",get:function(){return this.bus.settings},set:function(e){this.bus.settings=e}},{key:"token",get:function(){return this.bus.token},set:function(e){this.bus.token=e}}]),e}(),ni=ri;function oi(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function ai(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?oi(Object(i),!0).forEach((function(t){d()(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):oi(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function li(e,t){var i;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(i=ci(e))||t&&e&&"number"===typeof e.length){i&&(e=i);var s=0,r=function(){};return{s:r,n:function(){return s>=e.length?{done:!0}:{done:!1,value:e[s++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,o=!0,a=!1;return{s:function(){i=e[Symbol.iterator]()},n:function(){var e=i.next();return o=e.done,e},e:function(e){a=!0,n=e},f:function(){try{o||null==i.return||i.return()}finally{if(a)throw n}}}}function ci(e,t){if(e){if("string"===typeof e)return pi(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?pi(e,t):void 0}}function pi(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,s=new Array(t);i<t;i++)s[i]=e[i];return s}var ui=function(e){return Object.keys(e).map((function(t){var i=e[t];return{appVersion:A["a"],status:i.status,config:i.config,publishers:i.publishers,subscribers:i.subscribers,entities:i.entities.filter((function(e){return"unresolved"!==e.type})),subscribersStatuses:i.subscribersStatuses,subscribersConnectivityStatuses:i.subscribersConnectivityStatuses}}))},di=$()((function(e){M["a"].set(mi,ui(e))}),500,{trailing:!0}),mi="clients",fi=!0,bi=!1,hi=null,gi={name:"MqttClient",props:{initSettings:{type:Object},whiteLabel:{type:String,default:""},useLocalStorage:{type:Boolean,default:!0},needInitNewClient:{type:Boolean,default:!1},clientsCloseable:{type:Boolean,default:!0},secure:{type:Boolean,default:!0},color:{type:String,default:"grey-9"},accentColor:{type:String,default:"light-blue-7"},initEntities:{type:Array,default:function(){return[{type:"subscriber",rendered:!0,settings:w()(Ot["c"])},{type:"publisher",settings:w()(Ot["a"]),rendered:!0}]},validator:function(e){return e.reduce((function(e,t,i){return Qe.methods.validateEntity(t)?e&&!0:e&&!1}),!0)}},configuredClients:{type:Array,default:function(){return[]},validator:function(e){var t=!0;return e.forEach((function(e){if(!e.config||!e.entities||!e.publishers||!e.subscribers)return t=!1,!1;t=t&&Qe.methods.validateSettings(e.config),e.entities.forEach((function(e){t=t&&Qe.methods.validateEntityRecord(e)})),e.publishers.forEach((function(e){t=t&&Qe.methods.validatePublisher(e)})),e.subscribers.forEach((function(e){t=t&&Qe.methods.validateSubscriber(e)}))})),t}}},data:function(){return{version:A["a"],drawerRight:this.$q.platform.is.desktop,clients:{},statuses:{},activeClient:null,entities:[],publishers:[],subscribers:[],subscribersStatuses:[!1],subscribersConnectivityStatuses:[!1],subscribersMessages:[[]],subscribersMessagesBuffer:[[]],settingsModalModel:!1,editedClientId:null,renderInterval:0,messagesLimitCount:3e3,notResolvedMessages:[],isNeedScroll:!1,isInited:!1,republishMessage:null,wrapperWidth:0,firstViewedPanelIndex:0,needCloseAll:!1}},computed:{renderedEntities:function(){var e,t=[],i=li(this.entities);try{for(i.s();!(e=i.n()).done;){var s=e.value;if(s.rendered||void 0===s.rendered){var r=s;"publisher"===s.type?r.config=this.publishers[s.index]:"subscriber"===s.type&&(r.config=this.subscribers[s.index]),t.push(r)}}}catch(n){i.e(n)}finally{i.f()}return t},menuEnitites:function(){var e,t=[],i=li(this.entities);try{for(i.s();!(e=i.n()).done;){var s=e.value,r=ai({},s);"subscriber"===s.type?(r.settings=this.subscribers[s.index],r.status=this.subscribersStatuses[s.index]):"publisher"===s.type&&(r.settings=this.publishers[s.index]),t.push(r)}}catch(n){i.e(n)}finally{i.f()}return t},colsCount:function(){return this.getÐ¡olsCount(this.wrapperWidth)}},methods:{openURL:O["a"],"getÐ¡olsCount":function(e){var t=350,i=Math.floor(e/t);i=12/Math.ceil(12/i),i>this.renderedEntities.length&&(i=this.renderedEntities.length);var s=this.wrapperWidth<600?1:i;return s},closeSettingsHandler:function(){this.settingsModalModel=!1,this.editedClientId=null},saveSettingsHandler:function(e){this.createClient(e,this.editedClientId)},clearObject:function(e){var t=this;return Object.keys(e).reduce((function(i,s){var r=e[s];return r instanceof Object&&!Array.isArray(r)&&(r=t.clearObject(r),Object.keys(r).length||(r=void 0)),void 0!==r&&null!==r&&(i[s]=r),i}),{})},resolveSubscription:function(e,t){var i=k()(t,"options.properties.subscriptionIdentifier",void 0),s=k()(e,"properties.subscriptionIdentifier",void 0);return s&&i?!!("number"===typeof s&&s===i||Array.isArray(s)&&s.includes(i)):!!this.resolveTopics(e.topic,t.topic)},resolveSubscriptions:function(e,t,i){var s=this;return t.reduce((function(t,r,n){return i[n]&&s.resolveSubscription(e,r)&&t.push(n),t}),[])},getSharedTopicFilter:function(e){return e.replace(/^\$share\/[^/]+\//,"")},resolveTopics:function(e,t){0===t.indexOf("$share")&&(t=this.getSharedTopicFilter(t));var i=t.split("/"),s=e.split("/");return(s.length===i.length||"#"===i[i.length-1])&&i.reduce((function(e,t,i){return"#"===t||"+"===t?e&&!0:e&&t===s[i]}),!0)},errorHandler:function(e,t,i){var s=this.clients[e];s.logs.push({type:"error",data:{error:t},timestamp:Date.now()}),i&&this.showError(t)},showError:function(e){this.$q.notify({message:'<div class="text-center" style="font-size: 1.2rem;">'.concat(e.message,"</div>"),html:!0,color:"negative",icon:"mdi-alert-outline",timeout:2e3})},saveClients:function(){if(!this.isInited)return!1;this.$emit("change",ui(this.clients)),this.useLocalStorage&&di(this.clients)},createConnectPacket:function(e){return e=this.clearObject(e),5!==e.protocolVersion&&(delete e.properties,e.will&&delete e.will.properties),!e.will||e.will.topic||e.will.payload||delete e.will,e},setClientStatus:function(e,t){return!!this.clients[e]&&(!(this.clients[e].status===hi&&!t)&&(this.$set(this.statuses,e,t),void this.$set(this.clients[e],"status",t)))},messageProcessing:function(e,t){var i=this;e.payload=e.payload.toString();try{e.payload=JSON.parse(e.payload)}catch(o){}var s=this.clients[t];if(s.subscribersStatuses.length&&s.subscribersStatuses.filter((function(e){return!!e})).length){var r=this.resolveSubscriptions(e,s.subscribers,s.subscribersStatuses),n=!!r.length;n?r.forEach((function(t){!0===s.subscribersStatuses[t]?s.subscribersMessagesBuffer[t].push(e):"paused"===s.subscribersStatuses[t]&&(void 0===s.subscribers[t].missedMessages&&(s.subscribers[t].missedMessages=0),s.subscribers[t].missedMessages++)})):(s.notResolvedFlagInit||(this.$set(s,"notResolvedFlagInit",!0),this.entities.push({type:"unresolved",rendered:!1})),s.notResolvedMessages.push(e))}else s.subscribers.filter((function(t,r){i.resolveSubscription(e,t)&&!s.subscribersConnectivityStatuses[r]&&(s.notResolvedFlagInit||(i.$set(s,"notResolvedFlagInit",!0),i.entities.push({type:"unresolved",rendered:!1})),s.notResolvedMessages.push(e))}))},initClient:function(e,t){var i=this,s=this.clients[e],r=function(){i.setClientStatus(e,bi)},n=q.connect(t.host,t);n.on("connect",(function(t){var r=s.subscribersStatuses,n=s.subscribers,o=t.properties&&t.properties.userProperties&&t.properties.userProperties.subscriptions?JSON.parse(t.properties.userProperties.subscriptions):[];n.forEach((function(t,n){var a=r[n],l=o.findIndex((function(e){return e.topic===t.topic})),c=-1!==l;if(c&&!a)i.$set(r,n,!0);else if(!c&&a){if(0===t.mode)s.messages[n].splice(0,s.messages[n].length);else{var p=s.messages[n],u=Object.keys(p);u.forEach((function(e){i.$delete(p,e)}))}s.subscribersMessagesBuffer[n]=[],i.subscribe(e,n)}c&&o.splice(l,1)})),o.forEach((function(t){i.addSubscriber(void 0,e);var o=n.length-1,a=n[o],l={nl:t.no_local,rap:t.rap,rh:t.retain_handling,qos:t.qos,properties:{}};t.subscription_id&&(l.subscriptionIdentifier=t.subscription_id),i.$set(a,"options",l),i.$set(a,"topic",t.topic),i.$set(r,o,!0);var c=[{nl:t.no_local,rap:t.rap,rh:t.retain_handling,qos:t.qos,topic:t.topic}];i.$nextTick((function(){s.logs.push({type:"subscribe",data:{grants:c,restored:!0},timestamp:Date.now()})}))}))})),n.on("connect",(function(){i.setClientStatus(e,fi)})),n.on("connect",(function(e){s.logs.push({type:"connect",data:ai({},e),timestamp:Date.now()})})),n.once("connect",(function(t){i.$set(s,"cid",i.getCid(t)),i.$set(s,"inited",!0),i.activateRender();var r=[];s.processTimer=setInterval((function(){r.forEach((function(t){i.messageProcessing(t,e)})),r=[]}),500),n.on("message",(function(e,t,i){r.push(i)}))})),n.on("error",(function(t){i.errorHandler(e,t,!1)})),n.on("disconnect",(function(e){143===e.reasonCode&&s.subscribersStatuses.forEach((function(e,t){e&&(i.$delete(s.client._client._resubscribeTopics,s.subscribers[t].topic),i.$set(s.subscribersStatuses,t,!1),i.$set(s.subscribersConnectivityStatuses,t,!1))})),s.logs.push({type:"disconnect",data:ai({},e),timestamp:Date.now()}),r()})),n.on("close",(function(){s.logs.push({type:"disconnect",timestamp:Date.now()}),r()})),n.on("offline",(function(){i.$set(s,"inited",!1),s.logs.push({type:"offline",timestamp:Date.now()}),r()})),n.on("end",(function(){s.logs.push({type:"end",timestamp:Date.now()}),r()})),n.on("reconnect",(function(){i.$set(s,"inited",!0),s.logs.push({type:"reconnect",timestamp:Date.now()})})),this.$set(this.clients[e],"client",n),this.makeFlespiRestBus(e)},createClient:function(e,t){var i=this;return p()(l.a.mark((function s(){var r,n,o,a,c;return l.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:r=i.createConnectPacket(e),n="string"===typeof t||"number"===typeof t,o=n?t:Object.keys(i.clients).reduce((function(e,t){return e>parseInt(t)?e:parseInt(t)}),-1)+1,i.clients[o]?(c=i.clients[o],c.client&&(c.processTimer&&clearInterval(c.processTimer),i.destroyClient(c.client),i.setClientStatus(o,bi)),c.logs.push({type:"updated",data:ai({},r),timestamp:Date.now()})):(a={},a.id=o,a.status=!1,i.createInitEntities(a),a.logs=[{type:"created",data:ai({},r),timestamp:Date.now()}],a.notResolvedMessages=[],i.clients[o]=a),i.statuses[o]!==hi&&i.initClient(o,r),i.$set(i.clients[o],"config",r),i.saveClients();case 5:case"end":return s.stop()}}),s)})))()},initExternalClients:function(e){var t=this;e&&e.forEach((function(e){e=t.migrateClient(e);var i=Object.keys(t.clients).length,s={};s.config=e.config,s.id=i,s.client=null,s.status=e.status,s.publishers=e.publishers,s.subscribers=e.subscribers,s.entities=e.entities.map((function(e,t){return void 0===e.rendered&&(e.rendered=!0),e})),"logs"!==s.entities[0].type&&s.entities.unshift({type:"logs",rendered:!0}),s.messages=new Array(e.subscribers.length),s.subscribersMessagesBuffer=new Array(e.subscribers.length);for(var r=0;r<e.subscribers.length;r++)s.messages[r]=e.subscribers[r].mode?{}:[],s.subscribersMessagesBuffer[r]=[];e.subscribersStatuses?s.subscribersStatuses=e.subscribersStatuses:(s.subscribersStatuses=new Array(e.subscribers.length),s.subscribersStatuses.fill(!1)),e.subscribersConnectivityStatuses?s.subscribersConnectivityStatuses=e.subscribersConnectivityStatuses:(s.subscribersConnectivityStatuses=new Array(e.subscribers.length),s.subscribersConnectivityStatuses.fill(!1)),s.logs=[{type:"created",data:ai({},e.config),timestamp:Date.now()}],s.notResolvedMessages=[],t.$set(t.statuses,i,e.status),t.$set(t.clients,i,s),e.status!==hi&&t.initClient(i,t.createConnectPacket(e.config))}))},createInitEntities:function(e){var t=this,i=this.initEntities;e.subscribers=[],e.publishers=[],e.entities=[],e.messages=[],e.subscribersMessagesBuffer=[],e.subscribersStatuses=[],e.subscribersConnectivityStatuses=[],e.entities.push({type:"logs",rendered:!0}),i.forEach((function(i,s){switch(i.type){case"subscriber":e.subscribers.push(w()(_()({},Ot["c"],i.settings))),e.messages.push(i.settings.mode?{}:[]),e.subscribersMessagesBuffer.push([]),e.subscribersStatuses.push(!1),e.subscribersConnectivityStatuses.push(!1),e.entities.push({type:"subscriber",rendered:i.rendered,index:e.subscribers.length-1,id:Math.random().toString(16).substr(2,8)});break;case"publisher":e.publishers.push(w()(_()({},Ot["a"],i.settings))),e.entities.push({type:"publisher",rendered:i.rendered,index:e.publishers.length-1,id:Math.random().toString(16).substr(2,8)});break;default:t.showError(new Error("Unknown type of entity: ".concat(i.type)))}}))},addClientHandler:function(){this.settingsModalModel=!0},editClientHandler:function(e){this.editedClientId=e,this.settingsModalModel=!0},connectClientHandler:function(e){var t=this.clients[e];t.client&&(t.processTimer&&clearInterval(t.processTimer),this.destroyClient(t.client),this.setClientStatus(e,bi)),this.initClient(e,t.config),this.saveClients()},destroyClient:function(e){return e.removeAllListeners(["reconnect","end","offline","close","disconnect","error","message","connect"]),e.end(!0)},disconnectClientHandler:function(e){var t=this;return p()(l.a.mark((function i(){var s;return l.a.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return s=t.clients[e],s.processTimer&&clearInterval(s.processTimer),t.setClientStatus(e,hi),i.next=5,t.destroyClient(s.client);case 5:s.client=null,t.saveClients();case 7:case"end":return i.stop()}}),i)})))()},deleteClientHandler:function(e){var t=this,i=this.clients[e];this.$q.dialog({title:"Confirm",message:"Do you really want to delete client for ".concat(i.config.clientId,"?"),cancel:!0,ok:!0}).onOk((function(){i.processTimer&&clearInterval(i.processTimer),i.client?t.destroyClient(i.client).then((function(){t.$delete(t.statuses,e),t.$delete(t.clients,e),t.saveClients()})):(t.$delete(t.statuses,e),t.$delete(t.clients,e),t.saveClients())})).onCancel((function(){}))},activateRender:function(){var e=this;this.renderInterval||(this.renderInterval=setInterval((function(){Object.values(e.clients).forEach((function(t){t.subscribersMessagesBuffer.forEach((function(i,s){if(!i.length)return!1;var r=t.subscribers[s],n=t.messages[s];0===r.mode?(n&&(i=i.splice(-e.messagesLimitCount),n.splice.apply(n,[n.length,0].concat(o()(i))),n.splice(0,n.length-e.messagesLimitCount)),t.subscribersMessagesBuffer[s]=[]):t.subscribersStatuses[s]&&t.subscribersConnectivityStatuses[s]&&(Zt(i,5===t.config.protocolVersion&&r.treeField?r.treeField:"",n),t.subscribersMessagesBuffer[s]=[])}))}))}),500))},setActiveClient:function(e){var t=this.clients[e];if(!t)return this.showError("No current client"),!1;this.entities=t.entities,this.subscribers=t.subscribers,this.publishers=t.publishers,this.subscribersMessages=t.messages,this.subscribersMessagesBuffer=t.subscribersMessagesBuffer,this.notResolvedMessages=t.notResolvedMessages,this.subscribersStatuses=t.subscribersStatuses,this.subscribersConnectivityStatuses=t.subscribersConnectivityStatuses,this.activeClient=t},clearActiveClient:function(){this.activeClient=null,this.entities=[],this.subscribers=[],this.publishers=[],this.subscribersMessagesBuffer=[],this.notResolvedMessages=[],this.subscribersStatuses=[],this.subscribersConnectivityStatuses=[]},findEntity:function(e){return this.entities.findIndex((function(t){return e.type===t.type&&e.index===t.index}))},addPublisher:function(e){e=_()({},Ot["a"],e),this.publishers.push(w()(e));var t={type:"publisher",rendered:!0,index:this.publishers.length-1,id:Math.random().toString(16).substr(2,8)};this.activeClient.notResolvedFlagInit?this.entities.splice(-1,0,t):this.entities.push(t),this.saveClients(),this.isNeedScroll=!0},addSubscriber:function(e,t){t="number"===typeof t||"string"===typeof t?t:this.activeClient.id;var i=this.clients[t];e=_()({},Ot["c"],e),i.subscribers.push(w()(e)),i.messages.push([]),i.subscribersMessagesBuffer.push([]),i.subscribersStatuses.push(!1),i.subscribersConnectivityStatuses.push(!1);var s={type:"subscriber",rendered:!0,index:i.subscribers.length-1,id:Math.random().toString(16).substr(2,8)};this.activeClient.notResolvedFlagInit?this.entities.splice(-1,0,s):i.entities.push(s),this.saveClients(),this.activeClient&&(this.isNeedScroll=!0)},removePublisher:function(e){this.publishers.splice(e,1),this.entities.splice(this.findEntity({type:"publisher",index:e}),1),this.entities.forEach((function(t){"publisher"===t.type&&t.index>e&&t.index--})),this.saveClients()},removeSubscriber:function(e){var t=this;return p()(l.a.mark((function i(){var s;return l.a.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(s=t.subscribersStatuses[e],!s){i.next=4;break}return i.next=4,t.unsubscribeMessageHandler(t.activeClient.id,e);case 4:t.subscribers.splice(e,1),t.clients[t.activeClient.id].subscribersStatuses.splice(e,1),t.subscribersConnectivityStatuses.splice(e,1),t.subscribersMessages.splice(e,1),t.entities.splice(t.findEntity({type:"subscriber",index:e}),1),t.entities.forEach((function(t){"subscriber"===t.type&&t.index>e&&t.index--})),t.saveClients();case 11:case"end":return i.stop()}}),i)})))()},inputSubscriber:function(e,t){this.$set(this.subscribers,e,t),this.saveClients()},inputPublisher:function(e,t){this.$set(this.publishers,e,t),this.saveClients()},publishMessageHandler:function(e,t){var i=this;return p()(l.a.mark((function e(){return l.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,i.publishFreeMessage(i.publishers[t]);case 2:case"end":return e.stop()}}),e)})))()},publishFreeMessage:function(e){var t=this;return p()(l.a.mark((function i(){return l.a.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return e=t.clearObject(e),i.prev=1,i.next=4,t.activeClient.client.publish(e.topic,e.payload,e.options);case 4:t.$q.notify({message:'<div class="text-center" style="font-size: 1.2rem;">Published successfuly in topic '.concat(e.topic,"</div>"),html:!0,color:"positive",timeout:700}),i.next=10;break;case 7:i.prev=7,i.t0=i["catch"](1),t.activeClient.status?t.errorHandler(t.activeClient.id,i.t0,!0):t.errorHandler(t.activeClient.id,new Error("Client disconnected"),!0);case 10:case"end":return i.stop()}}),i,null,[[1,7]])})))()},subscribeMessageHandler:function(e,t){var i=this;return p()(l.a.mark((function s(){var r;return l.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(r=i.clearObject(i.subscribers[t]),!i.subscribers.reduce((function(e,t,s){return i.subscribersStatuses[s]&&e.push(t.topic),e}),[]).filter((function(e){return e===r.topic||r.topic===i.getSharedTopicFilter(e)||e===i.getSharedTopicFilter(r.topic)})).length){s.next=4;break}return i.showError(new Error("You have another subscription with same topic")),s.abrupt("return",!1);case 4:return i.subscribersMessages&&i.subscribersMessages.length&&i.$set(i.subscribersMessages,t,1===r.mode?{}:[]),s.next=7,i.subscribe(e,t);case 7:case"end":return s.stop()}}),s)})))()},subscribe:function(e,t){var i=this;return p()(l.a.mark((function s(){var r,n,o;return l.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return r=i.clients[e],n=i.clearObject(r.subscribers[t]),s.prev=1,i.$set(i.clients[e].subscribersStatuses,t,!0),i.$set(i.clients[e].subscribersConnectivityStatuses,t,!1),s.next=6,r.client.subscribe(n.topic,n.options);case 6:if(o=s.sent,i.$set(i.clients[e].subscribersConnectivityStatuses,t,!0),!o.length){s.next=12;break}if(r.logs.push({type:"subscribe",data:{settings:n,grants:o},timestamp:Date.now()}),!((128&o[0].qos)>0)){s.next=12;break}throw new Error("Subscription error ".concat(o[0].qos));case 12:s.next=19;break;case 14:s.prev=14,s.t0=s["catch"](1),i.$set(i.clients[e].subscribersStatuses,t,!1),i.$set(i.clients[e].subscribersConnectivityStatuses,t,!1),r.status?i.errorHandler(e,s.t0,!0):i.errorHandler(e,new Error("Client disconnected"),!0);case 19:i.saveClients();case 20:case"end":return s.stop()}}),s,null,[[1,14]])})))()},playSubscriberHandler:function(e){this.$set(this.subscribers[e],"missedMessages",void 0),this.$set(this.subscribersStatuses,e,!0)},pauseSubscriberHandler:function(e){this.$set(this.subscribers[e],"missedMessages",0),this.$set(this.subscribersStatuses,e,"paused")},clearMessagesHandler:function(e){var t=this.subscribersMessages[e];t.splice(0,t.length)},unsubscribeMessageHandler:function(e,t){var i=this;return p()(l.a.mark((function s(){return l.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,i.unsubscribe(e,t);case 2:case"end":return s.stop()}}),s)})))()},unsubscribe:function(e,t){var i=this;return p()(l.a.mark((function s(){var r,n;return l.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return r=i.clients[e],n=i.clearObject(r.subscribers[t]),s.prev=1,r.subscribersConnectivityStatuses[t]||i.$set(r.subscribersConnectivityStatuses,t,!0),i.$set(r.subscribersStatuses,t,!1),i.$set(r.messages,t,1===n.mode?{}:[]),i.$set(r.subscribersMessagesBuffer,t,[]),s.next=8,r.client.unsubscribe(n.topic,{properties:n.unsubscribeProperties});case 8:r.logs.push({type:"unsubscribe",data:i.clearObject(n),timestamp:Date.now()}),i.$set(r.subscribersConnectivityStatuses,t,!1),s.next=15;break;case 12:s.prev=12,s.t0=s["catch"](1),r.status?i.errorHandler(e,s.t0,!0):i.errorHandler(e,new Error("Client disconnected"),!0);case 15:case"end":return s.stop()}}),s,null,[[1,12]])})))()},sendFromSubscriberHandler:function(e){var t=this;this.republishMessage=w()(e),this.$nextTick((function(){t.$refs.publisherModal.show()}))},clearLogs:function(){var e=this.activeClient.logs;e.splice(0,e.length)},pickEntity:function(e){var t=this.entities[e];t.rendered||this.$set(this.entities[e],"rendered",!0),this.scrollToEntity(e)},scrollToEntity:function(e){if(this.$refs.wrapper){var t=this.$refs.wrapper,i=this.wrapperWidth/this.colsCount,s=i*e,r=Math.abs(t.scrollLeft-s)/i*50;E.start({from:t.scrollLeft,to:s,duration:r,apply:function(e){t.scrollLeft=e}})}},clearUnresolvedMessages:function(){var e=this.activeClient.notResolvedMessages;e.splice(0,e.length)},swipeHandler:function(e){var t=this.$refs.wrapper,i=this.wrapperWidth/this.colsCount,s=e.direction,r=0;t&&"left"===s?r=t.scrollLeft+i:t&&"right"===s&&(r=t.scrollLeft-i),E.start({from:t.scrollLeft,to:r,duration:200,apply:function(e){t.scrollLeft=e}})},getCid:function(e){return k()(JSON.parse(k()(e,"properties.userProperties.token","{}")),"cid",null)},makeFlespiRestBus:function(e){var t=this,i=this.clients[e],s=new ni;s.bus.auth.getRegions().then((function(r){r=k()(r,"data.result",[]);var n=r.reduce((function(e,t){var s=t["mqtt-ws"].split(":")[0];return-1!==i.config.host.indexOf(s)?t:e}));n?(s.settings={server:n.rest},s.token=i.config.username,t.$set(t.clients[e],"restBus",s)):t.$set(t.clients[e],"restBus",null)}))},onWrapperResize:function(e){var t=e.width;this.wrapperWidth=t;var i=this.$refs.wrapper,s=this.getÐ¡olsCount(t),r=t/s,n=r*this.firstViewedPanelIndex;i.scrollLeft=n},closeAllHandler:function(){for(var e=this.entities.length-1;e>=0;e--){var t=this.entities[e],i=t.type,s=t.index;"subscriber"===i?this.removeSubscriber(s):"publisher"===i&&this.removePublisher(s)}}},watch:{subscribersStatuses:function(e){this.saveClients()}},created:function(){var e=this;if(this.wrapperScroll=$()((function(t){if(e.$refs.wrapper){var i=e.$refs.wrapper,s=e.wrapperWidth/e.colsCount;e.firstViewedPanelIndex=Math.round(i.scrollLeft/s)}}),100),this.needInitNewClient&&!this.configuredClients.length&&(this.createClient(w()(_()({},Ot["b"],this.initSettings))),this.setActiveClient(0)),this.configuredClients.length)this.initExternalClients(this.configuredClients);else if(this.useLocalStorage){var t=M["a"].getItem(mi);this.initExternalClients(t)}this.isInited=!0,window&&window.addEventListener("beforeunload",(function(){for(var t in e.clients){var i=e.clients[t];i.status&&(i.processTimer&&clearInterval(i.processTimer),e.destroyClient(i.client))}}))},destroyed:function(){for(var e in this.clients){var t=this.clients[e];t.status&&(t.processTimer&&clearInterval(t.processTimer),this.destroyClient(t.client))}},components:{ClientSettingsModal:jt,SliderController:Rt,Subscriber:st,Publisher:ct,Unresolved:bt,Logs:xt,PublisherModal:Pt,EntitiesMenu:Yt},updated:function(){if(this.isNeedScroll){var e=this.$refs.wrapper;E.start({from:e.scrollLeft,to:e.scrollWidth,duration:300,apply:function(t){e.scrollLeft=t}}),this.isNeedScroll=!1}},mixins:[Qe,V]},vi=gi,yi=(i("dec3"),Object(re["a"])(vi,s,r,!1,null,null,null));t["a"]=yi.exports},f67f:function(e,t,i){},fbcf:function(e,t,i){"use strict";var s=i("d619"),r=i.n(s);r.a}}]);